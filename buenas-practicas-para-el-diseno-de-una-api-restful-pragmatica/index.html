<!DOCTYPE html><html lang="es" class="no-js"><head><title>Buenas prácticas para el Diseño de una API RESTful Pragmática</title><meta charset="utf-8"><link rel="canonical" href="https://elbauldelprogramador.com/buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica/"><link rel="icon" href="/favicon.png" type="image/png" sizes="144x144"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><meta name="theme-color" content="#002f4c"><meta name="description" content="Esta es una traducción lo más literal posible del artículo  original, ya que quería preservar la opinión personal del autor así como  también el destacable trabajo de investigación y análisis que realizó."><meta name="keywords" content=" API,  API restful, "><meta name="google-site-verification" content="FBg0GK1_H_PyCw6AD2iaBOclPbEC3LOV8hHXje5276w"><link rel="author" href="https://plus.google.com/+ElBauldelProgramador?rel=author"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@elbaulp"><meta name="twitter:creator" content="@Luzcila"><meta name="twitter:title" content="Buenas prácticas para el Diseño de una API RESTful Pragmática"><meta name="twitter:description" content="Esta es una traducción lo más literal posible del artículo  original, ya que quería preservar la opinión personal del autor así como  también el destacable trabajo de investigación y análisis que realizó."><meta property="twitter:image:src" content="https://elbauldelprogramador.com/img/2014/01/201305-xml-vs-json-api.png"><meta property="og:locale" content="es-ES"><meta property="og:type" content="article"><meta property="og:site_name" content="Buenas prácticas para el Diseño de una API RESTful Pragmática"><meta property="og:url" content="https://elbauldelprogramador.com/buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica/"><meta property="og:title" content="Buenas prácticas para el Diseño de una API RESTful Pragmática"><meta property="og:image" content="https://elbauldelprogramador.com/img/2014/01/201305-xml-vs-json-api.png"><meta property="og:description" content="Esta es una traducción lo más literal posible del artículo  original, ya que quería preservar la opinión personal del autor así como  también el destacable trabajo de investigación y análisis que realizó."><meta property="og:site_name" content="Buenas prácticas para el Diseño de una API RESTful Pragmática"><meta property="article:published_time" content="2016-01-01T00:00:00&#43;0000"><link rel="next" href="https://elbauldelprogramador.com/buscar-archivos-con-locate-mediante-expresiones-regulares-complejas/" title="Buscar archivos con locate mediante expresiones regulares"><link rel="prev" href="https://elbauldelprogramador.com/botbrewcompila-instala-y-ejecuta-aplicaciones-linux-en-android/" title="BotBrew basil, Compila, instala y ejecuta aplicaciones Linux en Android"><link rel="shortcut icon" href="https://elbauldelprogramador.com/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="https://elbauldelprogramador.com/favicon.png" type="image/x-icon"><link href="https://elbauldelprogramador.com/index.xml" rel="alternate" type="application/rss+xml" title="El Baúl del programador | Feed Principal"><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "WebSite", "name": "El Baúl del programador", "alternateName": "El Baúl", "url": "https://elbauldelprogramador.com" }</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "Blog", "name": "El Baúl del programador", "audience": { "@type": "Audience", "audienceType": "Developers, informáticos, programadores" }, "author": { "@type": "Person", "name": "Alejandro Alcalde", "url" : "https://elbauldelprogramador.com", "sameAs" : [ "https://www.facebook.com/elbaulp", "https://www.twitter.com/elbaulp", "https://www.linkedin.com/in/algui91", "https://plus.google.com/+elbauldelprogramador", "http://stackoverflow.com/users/1612432/elbaulp" ] }, "creator": { "@type": "Person", "name": "Alejandro Alcalde", "url" : "https://elbauldelprogramador.com", "sameAs" : [ "https://www.facebook.com/elbaulp", "https://www.twitter.com/elbaulp", "https://www.linkedin.com/in/algui91", "https://plus.google.com/+elbauldelprogramador", "http://stackoverflow.com/users/1612432/elbaulp" ] } }</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "Organization", "name": "El Baúl del Programador", "url": "https://elbauldelprogramador.com", "sameAs": ["http://plus.google.com/+elbauldelprogramador", "https://twitter.com/elbaulp", "https://telegram.me/elbaulp"] }</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "item": { "@id": "https://elbauldelprogramador.com", "name": "home" } },{ "@type": "ListItem", "position": 3, "item": { "@id": "https://elbauldelprogramador.com/buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica/", "name": "buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica" } }] }</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "Article", "author": { "name" : "Lucila Armentano" }, "headline": "Buenas prácticas para el Diseño de una API RESTful Pragmática", "description": "Esta es una traducción lo más literal posible del artículo original, ya que quería preservar la opinión personal del autor así como también el destacable trabajo de investigación y análisis que realizó.", "wordCount": 9719, "datePublished" : "2016-01-01T00:00:00&#43;0000", "dateModified" : "2017-09-24T19:21:18&#43;0100", "articleBody": " Esta es una traducción lo más literal posible del artículo original, ya que quería preservar la opinión personal del autor así como también el destacable trabajo de investigación y análisis que realizó.\n Tu modelo de datos ha empezado a estabilizarse y es el momento de crear una API pública para tu aplicación web. Te das cuenta de que es difícil hacer cambios significativos a tu API una vez que fue liberada, quieres lo mejor y lo antes posible. Ahora, en internet no escasean opiniones sobre diseño de APIs. Pero, debido a que no hay un standard adoptado popularmente que funcione en todos los casos, te quedas con un manojo de opciones: ¿Qué formatos deberías aceptar? ¿Cómo deberías autenticar? ¿Debería tu API ser versionada?\n\nDiseñando una API para SupportFu (una alternativa para Zendesk), intenté encontrar respuestas pragmáticas a estas preguntas. Mi objetivo para la API de SupportFu es que sea fácil de usar, facil de adoptar y lo suficientemente flexible para implementarla en nuestras propias interfaces de usuario.\nTL,DR Usa SSL en todos lados, sin excepciones Una API es tan buena como lo es su documentación – por lo tanto realiza una buena documentación Versiona a través de la URL, no de los encabezados Usa parámetros de consulta para filtros avanzados, ordenamiento y búsqueda Provee una forma de limitar cuáles campos son devueltos desde la API Devuelve algo útil de las peticiones POST, PATCH \u0026amp; PUT HATEOAS todavía no es muy práctico Usa JSON donde sea posible, XML sólo si tienes la obligación Deberías usar camelCase con JSON, pero snake_case es un 20% más fácil de leer Usa Pretty Print por defecto y asegura que gzip esté soportado No uses respuestas encapsuladas por defecto Considera usar JSON para cuerpos de peticiones POST, PUT y PATCH Pagina usando encabezados Link Provee una forma de cargar automáticamente representaciones de datos relacionados al recurso solicitado Provee una forma de sobreescribir el método HTTP Provee encabezados de respuesta útiles para controles de tráfico (rate limiting) Usa autenticación basada en tokens, transportado en OAuth2 donde se necesite delegación Incluir encabezados de respuesta que faciliten el caché Define un error de carga útil (payload) que sea consumible Utilizar efectivamente los códigos de error HTTP 1. Requisitos fundamentales para la API Muchas de las opiniones sobre diseño de API que aparecen en la web son discusiones académicas en torno a interpretaciones subjetivas de las normas difusas en lugar de lo que tiene sentido en el mundo real. Mi objetivo con este artículo es describir las mejores prácticas para una API pragmática diseñada para aplicaciones web de hoy en día. No hago ningún intento de satisfacer un standard si no parece viable. Para ayudar a guiar el proceso de toma de decisiones, he escrito algunos de los requisitos que la API debe cubrir:\n Debería utilizar estándares web donde tengan sentido Debería ser amigable para el desarrollador y ser explorable mediante una barra de direcciones del navegador Debería ser sencilla, intuitiva y consistente para que la adopción no sólo sea fácil, sino también agradable Debería proporcionar suficiente flexibilidad para potenciar mayoritariamente la UI SupportFu Debería ser eficiente, manteniendo el equilibrio con los demás requisitos Una API es una interfaz de usuario (UI) para un desarrollador – al igual que cualquier UI, es importante asegurar que la experiencia del usuario esté pensada cuidadosamente!\n2. Usa acciones y URLs RESTful Si hay una cosa que ha ganado amplia adopción, son los principios REST. Estos fueron presentados por primera vez por Roy Felding en el Capítulo 5 de su disertación sobre arquitecturas de software ubicadas en redes de trabajo.\nLos fundamentales principios de REST se basan en separar tu API en recursos lógicos. Estos recursos son manipulados usando peticiones HTTP donde el método (GET, POST, PUT, PATCH, DELETE) tienen un significado específico.\n¿Pero qué puede hacer un recurso? Bueno, estos deberían ser sustantivos (¡no verbos!) que tengan sentido desde una perspectiva del consumidor de la API. Aunque tus modelos internos pueden mapear cuidadosamente con los recursos, no es necesario que sea un mapeo uno-a-uno. La clave es no filtrarse ningún detalle irrelevante de implementación. Por ejemplo, algunos de los sustantivos de SupportFu podrían ser ticket, usuario y grupo.\nUna vez que tienes tus recursos definidos, necesitas identificar qué acciones aplican a ellos y cómo deberían relacionarse con tu API. Los principios REST proveen estrategias para manejar acciones CRUD usando métodos HTTP relacionados de la siguiente forma:\n GET /tickets- Devuelve una lista de tickets GET /tickets/12- Devuelve un ticket específico POST /tickets- Crea un nuevo ticket PUT /tickets/12- Actualiza el ticket #12 PATCH /tickets/12- Actualiza parcialmente el ticket #12 DELETE /tickets/12- Elimina el ticket #12 La grandeza de REST es que estas impulsando métodos HTTP existentes a implementar funcionalidades importantes en sólo un simple endpoint /tickets. No hay convención de nombres de métodos para seguir y la estructura URL es limpia y clara.\n¿El nombre del Endpoint debería ser singular o plural? La regla mantenlo-simple (keep-it-simple) aplica aquí. Si bien tu gramática interna te dirá que está mal describir una instancia única de un recurso utilizando el plural, la respuesta pragmática es mantener el formato de la URL consistente y siempre usar plural. No tener que lidiar con plurales irregulares (person/people, goose/geese) hace más simple la vida del consumidor de la API y es más sencillo para el proveedor de la API implementarla (como los más modernos frameworks manejarán nativamente /tickets y /tickets/12 bajo un controlador comun).\n¿Pero cómo lidiar con las relaciones? Si una relación puede existir con un sólo recurso, los principios REST proveen una guía útil. Veamos esto con un ejemplo. Un ticket en SupportFu consiste en un número de mensajes. Estos mensajes pueden ser lógicamente mapeados al endpoint /tickets de la siguiente forma:\n GET /tickets/12/messages - Devuelve una lista de mensajes para el ticket #12 GET /tickets/12/messages/5 - Devuelve el mensaje #5 para el ticket #12 POST /tickets/12/messages - Crea un nuevo mensaje en el ticket #12 PUT /tickets/12/messages/5 – Actualiza el mensaje #5 para el ticket #12 PATCH /tickets/12/messages/5 - Actualiza parcialmente el mensaje #5 para el ticket #12 DELETE /tickets/12/messages/5 - Borra el mensaje #5 para el ticket #12 Alternativamente, si una relación puede existir independientemente del recurso, tiene sentido incluir sólo un identificador en la representación de la salida del recurso. El consumidor de la API debería entonces tener que acertar al endpoint de la relación. Sin embargo, si la relación es comunmente requerida junto con el recurso, la API podría ofrecer funcionalidad para automáticamente incluir la representación de la relación y evitar el segundo impacto en la API. ¿Qué ocurre con las acciones que no corresponden a las operaciones CRUD? Aquí es donde las cosas pueden confundirse. Hay un número de enfoques:\n Reestructura la acción para que aparezca como un campo de un recurso. Esto funciona si la acción no toma parámetros. Por ejemplo, un acción “activate” puede ser asignada a un campo booleano activated y actualizado vía PATCH al recurso. Tratalo como un sub-recurso con principios REST. Por ejemplo, la API de GitHub te permite “star a gist“(marcar como importante) con PUT /gists/:id/star y “unstar” (desmarcar) con DELETE /gists/:id/star. A veces realmente no tienes forma de mapear la acción a una estructura REST apropiada. Por ejemplo, una búsqueda multi-recurso no tiene sentido ser asignada a un endpoint de un recurso específico. En este caso, /search podría tener más sentido incluso si no es un sustantivo. Esto está BIEN – sólo realiza lo que sea correcto desde la perspectiva del consumidor de la API y asegúrate de que esté claramente documentado para evitar confusiones. 3. SSL en todos lados – todo el tiempo Usa siempre SSL. Sin excepciones. Hoy, tus APIs web pueden ser accedidas desde cualquier lado donde haya internet (como librerías, cafeterías, aeropuertos, entre otros). No todos son seguros. Muchos no encriptan las comunicaciones, permitiendo facilmente ser espiados o falsificados si son interceptadas las credenciales de autenticación.\nOtra ventaja de usar siempre SSL es que garantiza que las comunicaciones encriptadas simplifiquen los esfuerzos de autenticación – puedes salir simplemente con los tokens de acceso en vez de tener que firmar cada petición a la API.\nHay que tener cuidado con los accesos no-SSL a las URLs de la API. NO las redirecciones a sus homólogas SSL. Es recomendable que lances un error. La última cosa que quieres para tus clientes pobremente configurados es enviar peticiones a un endpoint sin encriptar, sólo para ser redireccionados silenciosamente al verdadero endpoint encriptado.\n4. Documentación Una API es buena tanto como lo sea su documentación. Los docs deberían ser fáciles de encontrar y de acceso público. Muchos desarrolladores revisarán la documentación antes de realizar cualquier esfuerzo para integrarla. Cuando los docs están escondidos dentro de un archivo PDF o están permitido sólo para usuarios identificados, no son entonces sólo difíciles de encontrar sino que también dificultan la búsqueda.\nLos documentos deberían mostrar ejemplos de ciclos completos de petición/respuesta. Preferentemente, las peticiones deberían poder ser “pegadas” – tanto los hipervínculos deberían poder ser pegados en un navegador como los ejemplos de código deberían poder ser pegados en una consola. GitHub y Strip hacen un muy buen trabajo en este aspecto.\nUna vez que liberes una API pública, te comprometes a no romper cosas sin previo aviso. La documentación debe incluir información y detalles sobre futuras actualizaciones a la API que sean visibles al exterior. Las actualizaciones deben ser entregadas a través de un blog (es decir, una lista de cambios) o una lista de correo (preferiblemente ambos).\n5. Versionado Siempre versiona tu API. El versionado te ayuda a iterar más rápido y evitar peticiones inválidas desde endpoints actualizados. Además te ayuda a resolver cualquier transición importante de versión de la API mientras continúas ofreciendo viejas versiones de la API por un período de tiempo.\nHay opiniones cruzadas respecto si la versión de la API debería ser incluida en la URL o en el encabezado. Académicamente hablando, debería probablemente estar en el encabezado. Sin embargo, la versión necesita estar en la URL para asegurar la posibilidad de explorar en el navegador los recursos a través de las versiones (recuerda los requerimientos de la API especificados al inicio del artículo).\nSoy un gran fanático del alcance que Stripe ha tomado respecto al versionado de la API - la URL tiene un número de versión principal (v1), pero la API tiene las sub-versiones basadas en fechas que pueden ser elegidas mediante un encabezado de petición HTTP personalizado. En este caso, la versión principal proporciona la estabilidad estructural de la API en su conjunto, mientras que las sub-versiones representan cambios más pequeños (campos inhabilitados, cambios en el endpoint, etc).\nUna API nunca va a ser completamente estable. El cambio es inevitable. Lo importante es cómo se gestiona el cambio. Anuncios de fechas y planificaciones bien documentados puede ser una buena práctica para muchas APIs. Todo se reduce a lo que es razonable teniendo en cuenta la industria y los posibles consumidores de la API.\n6. Filtrado, ordenación y búsqueda en los resultados Lo mejor es mantener la URL base de recursos tan simple como sea posible. Filtros de resultados complejos, requisitos de ordenamiento y búsqueda avanzada (cuando se limita a un solo tipo de recurso) pueden ser implementados fácilmente como parámetros de consulta en la parte superior de la URL base. Veamos esto en más detalle:\nFiltrado: Usa un único parámetro de consulta por cada campo que implemente el filtro. Por ejemplo, cuando se pide una lista de tickets del endpoint /tickets, podrías querer limitarla a sólo los que están en estado abierto. Esto puede ser logrado con una petición como GET /tickets?state=open. En este caso, state es el parámetro de la consulta que implementa el filtro.\nOrdenación: Similar al filtrado, un parámetro genérico sort puede ser usado para describir las reglas de ordenamiento. Organiza los requerimientos de ordenamiento complejos permitiendo que el parámetro de ordenación sea tomado de una lista de campos separados por coma, cada uno con un posible negativo unario para implicar orden descendiente. Veamos algunos ejemplos:\n GET /tickets?sort=-priority – Devuelve una lista de tickets en orden de prioridad descendiente GET /tickets?sort=-priority,created_at- Devuelve una lista de tickets en orden de prioridad descendiente. Con una prioridad específica, los tickets más viejos son ordenados primero. Búsqueda: A veces los filtros básicos no son suficientes y se necesita la posibilidad de realizar una búsqueda completa sobre el texto. Tal vez ya estés usando ElasticSearch u otra búsqueda basada en la tecnología Lucene. Cuando una búsqueda completa sobre el texto es usada como un mecanismo de devolución de instancias de recurso para un tipo de recurso específico, puede ser expuesto en la API como un parámetro de consulta al endpoint del recurso. Digamos q. Las consultas de búsqueda deberían ser pasadas directamente al motor de búsqueda y la salida de la API deberían estar en el mismo formato que un lista de resultado normal.\nCombinando todo esto, podemos construir consultas como:\n GET /tickets?sort=-updated_at – Devuelve los tickets recientemente actualizados GET /tickets?state=closed\u0026sort;=-updated_at \u0026ndash; Devuelve los tickets recientemente cerrados GET /tickets?q=return\u0026state;=open\u0026sort;=-priority,created_at – Devuelve el ticket abierto de mayor prioridad que menciona la palabra ‘return’ Alias para las consultas comunes Para hacer que la experiencia con la API sea más agradable para el consumidor promedio, considera empaquetar sets de condiciones dentro de una ruta REST facilmente accesible. Por ejemplo, la consulta de tickets cerrados recientemente puede ser empaquetada como _GET /tickets/recentlyclosed.\n7. Limitando los campos que son devueltos por la API El consumidor de la API no siempre necesita la representación completa de un recurso. La habilidad de seleccionar y elegir los campos devueltos permite el doble beneficio de dejar que el consumidor de la API minimice el tráfico de red y acelere su propio uso de la API.\nUsa el parámetro de consulta fields que tome una lista de campos separados con coma. Por ejemplo, la siguiente petición debería traer sólo la información suficiente para mostrar una lista ordenada de tickets abiertos:\nGET /tickets?fields=id,subject,customer_name,updated_at\u0026amp;state;=open\u0026amp;sort;=-updated_at 8. Update \u0026amp; Creation deberían devolver una representación de un recurso Una llamada PUT, POST o PATCH puede hacer modificaciones a los campos del recurso subyacente que no fueron parte de los parámetros provistos (por ejemplo: los campos timestamp created_at o updated_at ). Para evitarle al consumidor de la API tener que consultar nuevamente a la API por un recurso actualizado, agrega el retorno de la actualización (o creación) como parte de la respuesta.\nEn el caso de un POST que sea un resultado de una creación, usa el código de status HTTP 201 e incluye un encabezado Location que apunte a la URL del nuevo recurso.\n9. ¿Deberías HATEOAS? Hay muchas opiniones variadas sobre si el consumidor de la API debería crear hipervínculos o si los hipervínculos deberían ser provistos por la API. Los principios de diseño RESTful especifican HATEOAS, el cual aproximadamente declara que esa interacción con un endpoit debería definirse en la metadata que viene con la respuesta, y no basada en información que va por fuera de la banda (out-of-band).\nA pesar de que la web generalmente trabaja con los principios HATEOAS (ej, cuando vamos a una portada y seguimos hipervínculos basados en lo que vemos en la página), no creo que estemos listos para HATEOAS en la API todavía. Cuando navegamos en un sitio, las decisiones sobre qué hipervínculos van a ser clickeados se hacen durante la ejecución. Sin embargo, con una API, las decisiones como qué peticiones van a ser enviadas son tomadas cuando el código de integración de la API es escrito, no en tiempo de ejecución. ¿Podrían las decisiones ser aplazadas al tiempo de ejecución? Seguro, de todas maneras, no hay mucho que ganar bajando esa ruta al código ya que el código no estaría disponible para manejar cambios significantes en la API sin romperse. Esto significa que HATEOAS es prometedor pero no está listo para ser protagonista todavía. Algún esfuerzo más tiene que ser realizado para definir los estándars y herramientas al rededor de estos principios para que su potencial sea completamente aprovechado.\nPor ahora es mejor asumir que el usuario tiene acceso a la documentación e incluir los identificadores de recursos en la respuesta, la cual el consumidor de la API usará cuando crea hipervínculos. Hay un par de ventajas en utilizar los identificadores – los datos que viajan sobre la red son minimizados y los datos almacenados por los consumidores de la API también son minimizados (ya que son guardados los identificadores cortos, en vez de las URLs que contienen los identificadores).\nAdemás, dado que este post es partidario de incluir los números de versión en la URL, tiene más sentido a largo plazo para el consumidor de la API almacenar los identificadores y no las URLs. Después de todo, el identificador es estable versión por versión pero la URL que representa no lo es!\n10. Sólo respuestas JSON Es tiempo de dejar XML atras en las APIs. Es verborrágico, es difícil de parsear, dificil de leer, su modelo de datos es incompatible con la mayoría de los modelos de datos de los lenguajes de programación y sus ventajas son irrelevantes cuando tus necesidades primarias de respuesta son serializaciones de una representación de datos interna.\nNo voy a poner mucho esfuerzo en explicar las razones de lo dicho arriba si se puede ver cómo otros (Youtube, Twitter \u0026amp; Box) ya han comenzado el éxodo XML.\nSimplemente te dejaré que veas las gráficas de Google Trends (XML API vs JSON API) para que medites:\n No obstante, si tu base de clientes consiste en un gran número de clientes empresariales, puedes tener que dar soporte XML de todas maneras. Si debes hacerlo, te surgirá una nueva pregunta:\n¿Debería cambiar el tipo del contenido basado en encabezados Accept o basado en la URL?\nPara garantizar la explorabilidad del navegador, debería basarse en la URL. La opción más razonable debería ser agregar una extensión .xml o .json al endpoint de la URL .\n11. snake_case vs camelCase para el nombre de los campos Si estás usando JSON (JavaScript Object Notation) como tu principal formato de representación, la forma “correcta” de hacer las cosas es seguir la convención de nombres de JavaScript – y esto sinifica camelCase para el nombre de los campos! Si entonces optas por el camino de construir librerias cliente en varios lenguajes, lo mejor es usar la convención de nombres correspondiente al idioma – camelCase para C# y Java, snake_case para python y ruby.\nPara pensar: Siempre sentí que snake_case es más fácil para leer que la convención camelCase de JavaScript. Pero no tenía ninguna evidencia para respaldar esta “sensación”, hasta ahora. Basado en un estudio visual sobre camelCase y snake_case (PDF) del 2010, snake_case es un 20% más facil de leer que camelCase! Este impacto en legibilidad puede afectar la explorabilidad de la API y los ejemplos de la documentación.\nMuchas JSON APIs populares usan snake_case. Sospecho que esto se debe a la serialización de librerías que siguen las convenciones de nombres de los lenguajes subyacentes que utilizan. Tal vez necesitamos tener librerías de serialización JSON que manejen las transformaciones de convenciones de nombres.\n12. Pretty print por default y asegura que gzip sea soportado Una API que provee salida con compresión de espacios en blanco no es muy divertida de ver desde un navegador. Aunque algún tipo de parámetro de consulta (como ?pretty=true) puede ser provisto para activar pretty printing, una API que utiliza pretty print por default es mucho más accesible. El costo de transferencia de datos extra es insignificante, especialmente cuando lo comparas con el costo de no implementar gzip.\nConsidera algunos casos de uso: ¿Qué pasa si un consumidor de la API está debuggeando y en su código imprime los datos recibidos de la API? – Serán legibles por default. O si el consumidor graba en la URL el código que fue generando y lo interpreta directamente desde el navegador – Será legible por default. Éstos son pequeños detalles. Pequeños detalles que hacen a una API agradable de usar!\nPero, ¿qué pasa con toda la transferencia extra de datos?\nVeamos esto con un ejemplo del mundo real. He bajado un poco de datos de la API de GitHub, la cual usa pretty print por default. También estuve haciendo algunas comparaciones con gzip:\n$ curl https://api.github.com/users/veesahni \u0026gt; with-whitespace.txt $ ruby -r json -e \u0026#39;puts JSON JSON.parse(STDIN.read)\u0026#39; \u0026lt; with-whitespace.txt \u0026gt; without-whitespace.txt $ gzip -c with-whitespace.txt \u0026gt; with-whitespace.txt.gz $ gzip -c without-whitespace.txt \u0026gt; without-whitespace.txt.gz Los archivos de salida tienen los siguientes tamaños:\n without-whitespace.txt – 1252 bytes with-whitespace.txt – 1369 bytes without-whitespace.txt.gz – 496 bytes with-whitespace.txt.gz – 509 bytes En este ejemplo, el caracter en blanco incrementó el tamaño de la salida en un 8.5% cuando gzip no entró en juego y un 2.6% cuando utilizamos gzip. Por otro lado, el acto de comprimir con gzip en sí mismo provee un 60% de ahorro de ancho de banda. Debido a que el costo del pretty print es relativamente pequeño, es mejor utilizar pretty print por default y asegurar que la compresión con gzip esté soportada.\nPara enfatizar este punto, Twitter descubrió que hay un 80% de ahorro (en algunos casos) cuando habilita la compresión gzip en su API Streaming. Stack Exchange fue más lejos, nunca devuelve una respuesta que no esté comprimida!\n13. No uses un envoltorio por default, pero posibilitalo cuando sea necesario Muchas APIs empaquetan sus respuestas en envoltorios como este:\n{ \u0026#34;data\u0026#34; : { \u0026#34;id\u0026#34; : 123, \u0026#34;name\u0026#34; : \u0026#34;John\u0026#34; } } Hay un par de justificaciones para hacer esto – facilita incluir metadata adicional o información de paginación, algunos clientes REST no permiten fácil acceso a los encabezados HTTP y las peticiones JSONP no tienen acceso a sus encabezados. Sin embargo con standards que están siendo rápidamente adoptados como CORS y Link header from RFC5988, empaquetar se está volviendo innecesario.\nPodemos profundizar a futuro la API manteniéndola sin empaquetamiento por default y empaquetando sólo en casos excepcionales.\n¿Cómo debería usarse un envoltorio en casos excepcionales?\nHay 2 situaciones donde un envoltorio es realmente necesario – si la API necesita soportar peticiones cross domain sobre JSONP o si el cliente es incapaz de trabajar con encabezados HTTP.\nLas peticiones JSONP vienen con un parámetro adicional de consulta (usualmente llamado callback o jsonp) representando el nombre de la función callback. Si este parámetro está presente, la API debería cambiarse a un modo completo de empaquetamiento donde siempre responda con un código de status HTTP 200 y pase el código de status real dentro de la respuesta JSON. Cualquier encabezado HTTP adicional que debería pasar a través de la respuesta debería ser mapeado a los campos JSON, como se ve a continuación:\ncallback_function({ status_code: 200, next_page: \u0026#34;https://..\u0026#34;, response: { ... actual JSON response body ... } }) De forma similar, para soportar clientes con HTTP limitado, habilita un parámetro especial de consulta ?envelope=true, el cual debería disparar un empaquetamiento full (sin la función callback JSONP).\n14. Cuerpos HTML POST, PUT \u0026amp; PATCH codificados en JSON Si estás siguiendo el objetivo de este artículo, entonces has adoptado JSON para todas las salidas de la API. Ahora consideremos JSON para la entrada de la API.\nMuchas APIs usan URL cifradas en sus cuerpos de las peticiones de la API. El cifrado de URL es exactamente lo que suena – los cuerpos de la petición donde los pares clave-valor están cifrados usando las mismas convenciones que uno usaría para cifrar datos en los parámetros de consulta de URL. Esto es simple, ampliamente soportado y deja el trabajo hecho.\nSin embargo, el cifrado de URL tiene algunos inconvenientes que lo hacen problemático. No tiene el concepto de tipos de dato. Esto obliga a la API a interpretar cadenas de caracteres y transformarlas en tipos numéricos (por ej integer) o booleanos. Además, no tiene un concepto real de estructura jerárquica.\nAunque hay algunas convenciones que pueden construir estructuras que no siguen el par clave-valor (como agregar [] a una clave para representar un arreglo), esto no tiene comparación con la estructura nativa jerárquica de JSON.\nSi la API es simple, cifrar la URL puede ser suficiente. Sin embargo, APIs complejas deberían apegarse a JSON para sus entradas a la API. De cualquier manera, elige una y se consistente en toda la API.\nUna API que acepta peticiones POST, PUT y PATCH con cifrado JSON debería también requerir en el encabezado Content-Type seteado con application/json o lanzar un código de status HTTP: 415 Unsopported Media Type.\n15. Paginación Las APIs con preferencia “envelope” (envoltorio) típicamente incluyen los datos de paginación dentro del mismo envoltorio. Y no los culpo – hasta hace poco, no había mejores opciones. La forma correcta de incluir los detalles de paginación hoy en día es utilizando el encabezado Link introducido por RFC 5988.\nUna API que usa el encabezado Link puede devolver un set de hipervínculos listos para que el consumidor de la API no tenga que construir los hipervínculos por su propia cuenta. Esto es especialmente importante cuando la paginación está basada en el cursor. Aquí hay un ejemplo de un encabezado Link utilizado correctamente, obtenido de la documentación de GitHub:\nLink: \u0026lt;https://api.github.com/user/repos?page=3\u0026amp;per_page=100\u0026gt;; rel=\u0026#34;next\u0026#34;, \u0026lt;https://api.github.com/user/repos?page=50\u0026amp;per_page=100\u0026gt;; rel=\u0026#34;last\u0026#34; Pero esto no es una solución completa para muchas APIs que quieren devolver información adicional de paginación, por ejemplo el conteo del total de resultados disponibles. Una API que requiere enviar un contador puede usar un encabezado HTTP personalizado como X-Total-Count.\n16. Representaciones de recursos relacionados a los datos solicitados mediante carga automática Hay muchos casos donde un consumidor de la API necesita cargar datos relacionados (o referenciados) con el recurso que se está solicitando. En vez de pedir que el consumidor haga una solicitud a la API reiteradas veces por esta información, sería mucho más eficiente permitir que los datos relacionados sean devueltos y cargados a través del recurso original en demanda.\nDe todos modos, como esto va contra algunos principios RESTful, podemos minimizar nuestras desviaciones haciendo entonces el parámetro de consulta embed (o expand).\nEn este caso, embed podría ser una lista separada por comas de campos a ser embebidos. La notación con punto puede ser usada para referir sub-campos. Por ejemplo:\nGET /tickets/12?embed=customer.name,assigned_user Esto debería devolver un ticket con detalles adicionales embebidos, como:\n{ \u0026#34;id\u0026#34; : 12, \u0026#34;subject\u0026#34; : \u0026#34;I have a question!\u0026#34;, \u0026#34;summary\u0026#34; : \u0026#34;Hi, ....\u0026#34;, \u0026#34;customer\u0026#34; : { \u0026#34;name\u0026#34; : \u0026#34;Bob\u0026#34; }, \u0026#34;assigned_user\u0026#34;: { \u0026#34;id\u0026#34; : 42, \u0026#34;name\u0026#34; : \u0026#34;Jim\u0026#34; } } Por supuesto, la habilidad de implementar algo así realmente depende de la complejidad interna. Este tipo de embebido puede facilmente resultar en un problema de N+1 select.\n17. Sobreescribiendo el método HTTP Algunos clientes HTTP pueden trabajar solo con peticiones simples GET y POST. Para mejorar la accesibilidad a estos clientes limitados, la API necesita proveer una forma de sobreescribir el método HTTP.\nAunque no hay ningún estandard fuerte aquí, la convención popular es aceptar un encabezado de petición X-HTTP-Method-Override con un valor de cadena que contenga PUT, PATCH o DELETE.\nNota que sobreescribir el encabezado debería ser aceptado en peticiones POST. Las peticiones GET nunca deberían cambiar datos en el servidor!\n18. Limitación de tráfico por ratio (Rate limiting) Para prevenir abusos, una práctica estandard es agregar algún tipo de límite de tráfico a la API. RFC 6585 introduce el código de status HTTP 429 Too Many Requests para controlar esto.\nSin embargo, puede ser muy útil notificar al consumidor de sus límites antes de que se encuentre con ellos. Este es un área en la que actualmente faltan los standards pero existe una cantidad de convenciones populares usando encabezados de respuesta HTTP.\nMinimamente, incluye los siguientes encabezados (usando las convenciones de nombres de Twitter ya que los encabezados tipicamente no tienen capitalizacion de las palabras del medio):\n X-Rate-Limit-Limit – El numero de peticiones permitidas en el período actual X-Rate-Limit-Remaining – El número de peticiones que faltan en el período actual X-Rate-Limit-Reset – El número de segundos restantes en el período actual ¿Por qué se usa el número de segundos restantes en vez de un time stamp para X-Rate-Limit-Reset?\nUn timestamp contiene una cantidad de información útil pero innecesaria como la fecha y probablemente el time-zone. Un consumidor de la API realmente quiere saber cuándo puede enviar la petición nuevamente, y el número de segundos responde a esta pregunta con el mínimo procesamiento adicional al final. Además escapa a problemas relacionados con desvíos de reloj.\nAlgunas APIs usan un timestamp de UNIX (segundos desde la fecha standard 1/1/1970) para X-Rate-Limit-Reset. ¡No hagas lo mismo!\n¿Por qué es una mala práctica usar el timestamp UNIX para X-Rate-Limit-Reset?\nLa spec de HTTP ya especifica el uso del formato de fecha RFC 1123 (actualmente usado en los encabezados HTTP Date, If-Modified-Since y Last-Modified). Si fuéramos a especificar un nuevo encabezado HTTP que tome un timestamp de algún tipo, debería seguir las convenciones RFC 1123 en vez de usar timestamps UNIX.\n19. Autenticación Una API RESTful debería ser stateless (sin estado). Esto significa que la petición de autenticación no debería depender de cookies o sesiones. En lugar de ello, cada petición debería venir con algún tipo de credencial de autorización.\nSiempre que se use SSL, las credenciales de autenticación pueden ser simplificadas a un token de acceso generado de forma aleatoria, que es entregado en el campo de nombre de usuario de HTTP Basic Auth.\nLo grandioso de esto es que es completamente navegable con un explorador – éste simplemente abriría un popup pidiéndote que ingreses las credenciales si recibe un código de status 401 Unauthorized desde el servidor.\nDe todos modos, este método de autenticación token-over-basic-auth (token sobre autenticación basica) es sólo aceptable en los casos en que sea práctico tener la posibilidad de que el usuario copie un token de una interface de administración del entorno del consumidor de la API.\nEn los casos donde no sea posible, OAuth 2 debería ser usado para facilitar la transferencia del token seguro a terceros. OAuth 2 usa tokens Bearer y además depende de SSL para su encriptación de transporte subyacente.\nUna API que necesita soporte JSONP necesitará un tercer método de autenticación, ya que las peticiones JSONP no pueden enviar credenciales HTTP Basic Auth ni Bearer tokens. En este caso, puede utilizarse un parámetro especial de consulta “access_token”. Nota: hay un problema de seguridad inherente si se usa un parametro de consulta para el token ya que la mayoría de los servidores web almacenan los parámetros de consulta en sus logs.\nPara lo que nos interesa, los tres métodos de arriba son sólo formas de transportar el token a través de la frontera de la API. El verdadero token subyacente mismo podría ser idéntico.\n20. Cacheo HTTP provee un framework de cacheo incluido! Todo lo que tienes que hacer es incluir algunos encabezados adicionales en la respuesta de salida y hacer una pequeña validación cuando recibes algún encabezado de petición de entrada.\nHay 2 alcances: ETag y Last-Modified\nETag: Cuando generas una petición, incluye un encabezado HTTP ETag conteniendo un hash o checksum de la representación. Este valor debería cambiar cada vez que la salida cambia. Ahora, si una petición de entrada HTTP contiene un encabezado If-None-Match con un valor ETag, la API debería devolver un código de status 304 Not Modified en lugar de la salida del recurso.\nLast-Modified (Último modificado): Básicamente funciona como ETag, excepto en que usa timestamps. El encabezado de respuesta Last-Modified contiene un timestamp en formato RFC 1123 el cual es validado contra If-Modified-Since. Nótese que la especificación de HTTP ha tenido 3 formatos de fecha diferentes aceptables y el servidor debería estar preparado para aceptar cualquiera de ellos.\n21. Errores Sencillamente como una página HTML de error muestra un mensaje de error útil a un visitante, una API debería proveer un mensaje de error útil en un formato conocido. La representación de un error debería no ser diferente a la representación de cualquier recurso, con su propio set de campos.\nLa API debería devolver siempre códigos de status HTTP prácticos. Los errores de la API generalmente caen dentro de 2 tipos: la serie 400 de códigos de status para problemas en el cliente y la serie 500 de códigos de status para problemas en el servidor. Como mínimo, la API debería estandarizar que todos los errores de la serie 400 vengan en formato de error JSON. Si es posible (por ejemplo si los balanceadores de carga y proxies reversos pueden crear cuerpos de error personalizables), este debería extender la serie de códigos de error 500.\nEl cuerpo de un error JSON debería proveer algunas cosas para el desarrollador – un mensaje de error útil, un código de error único (que pueda ser buscado para más detalles en la documentación) y una descripción detallada. Una representación de salida JSON de esta forma podría ser:\n{ \u0026#34;code\u0026#34; : 1234, \u0026#34;message\u0026#34; : \u0026#34;Something bad happened :(\u0026#34;, \u0026#34;description\u0026#34; : \u0026#34;More details about the error here\u0026#34; } Los errores de validación para peticiones PUT, PATCH y POST necesitarán un breakdown en el campo. Esto se modela mejor utilizando un código de error de alto nivel arreglado para fallas de validación que proveen detalles del error en el campo adicional error, como por ejemplo:\n{ \u0026#34;code\u0026#34; : 1024, \u0026#34;message\u0026#34; : \u0026#34;Validation Failed\u0026#34;, \u0026#34;errors\u0026#34; : [ { \u0026#34;code\u0026#34; : 5432, \u0026#34;field\u0026#34; : \u0026#34;first_name\u0026#34;, \u0026#34;message\u0026#34; : \u0026#34;First name cannot have fancy characters\u0026#34; }, { \u0026#34;code\u0026#34; : 5622, \u0026#34;field\u0026#34; : \u0026#34;password\u0026#34;, \u0026#34;message\u0026#34; : \u0026#34;Password cannot be blank\u0026#34; } ] } 22. Códigos de estado HTTP HTTP define un set de significativos códigos de status que pueden ser devueltos por la API. Éstos pueden ser nivelados para ayudar a los consumidores de la API dirigir sus respuestas apropiadamente. A continuación les dejo una lista de los que definitivamente deberías utilizar:\n 200 OK - Respuesta a un exitoso GET, PUT, PATCH o DELETE. Puede ser usado también para un POST que no resulta en una creación. 201 Created – [Creada] Respuesta a un POST que resulta en una creación. Debería ser combinado con un encabezado Location, apuntando a la ubicación del nuevo recurso. 204 No Content – [Sin Contenido] Respuesta a una petición exitosa que no devuelve un body (como una petición DELETE) 304 Not Modified – [No Modificada] Usado cuando el cacheo de encabezados HTTP está activo 400 Bad Request – [Petición Errónea] La petición está malformada, como por ejemplo, si el contenido no fue bien parseado. 401 Unauthorized – [Desautorizada] Cuando los detalles de autenticación son inválidos o no son otorgados. También útil para disparar un popup de autorización si la API es usada desde un navegador. 403 Forbidden – [Prohibida] Cuando la autenticación es exitosa pero el usuario no tiene permiso al recurso en cuestión. 404 Not Found – [No encontrada] Cuando un recurso no existente es solicitado. 405 Method Not Allowed – [Método no permitido] Cuando un método HTTP que está siendo pedido no está permitido para el usuario autenticado. 410 Gone – [Retirado] Indica que el recurso en ese endpoint ya no está disponible. Útil como una respuesta en blanco para viejas versiones de la API 415 Unsupported Media Type – [Tipo de contenido no soportado] Si el tipo de contenido que solicita la petición es incorrecto 422 Unprocessable Entity – [Entidad improcesable] Utilizada para errores de validación 429 Too Many Requests – [Demasiadas peticiones] Cuando una petición es rechazada debido a la tasa límite . En conclusión Una API es una interfaz de usuario para desarrolladores. Enfoca tu esfuerzo en asegurar que no sea sólo usable a nivel funcional sino también amigable.\nReferencias Vinay Sahni | Best Practices for Designing a Pragmatic RESTful API ", "image": { "@type": "ImageObject", "url": "https://elbauldelprogramador.com/img/2014/01/201305-xml-vs-json-api.png", "width": 800, "height": 420 }, "mainEntityOfPage" : "https://elbauldelprogramador.com/buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica/", "publisher" : { "@type": "Organization", "name" : "Alejandro Alcalde", "logo" : { "@type" : "ImageObject", "url" : "http://elbauldelprogramador.com/img/logo.png", "height" : 60, "width" : 600 } } }</script><script type="application/ld+json">{ "@context": "http://schema.org", "@type": "BlogPosting", "articleBody": " Esta es una traducción lo más literal posible del artículo original, ya que quería preservar la opinión personal del autor así como también el destacable trabajo de investigación y análisis que realizó.\n Tu modelo de datos ha empezado a estabilizarse y es el momento de crear una API pública para tu aplicación web. Te das cuenta de que es difícil hacer cambios significativos a tu API una vez que fue liberada, quieres lo mejor y lo antes posible. Ahora, en internet no escasean opiniones sobre diseño de APIs. Pero, debido a que no hay un standard adoptado popularmente que funcione en todos los casos, te quedas con un manojo de opciones: ¿Qué formatos deberías aceptar? ¿Cómo deberías autenticar? ¿Debería tu API ser versionada?\n\nDiseñando una API para SupportFu (una alternativa para Zendesk), intenté encontrar respuestas pragmáticas a estas preguntas. Mi objetivo para la API de SupportFu es que sea fácil de usar, facil de adoptar y lo suficientemente flexible para implementarla en nuestras propias interfaces de usuario.\nTL,DR Usa SSL en todos lados, sin excepciones Una API es tan buena como lo es su documentación – por lo tanto realiza una buena documentación Versiona a través de la URL, no de los encabezados Usa parámetros de consulta para filtros avanzados, ordenamiento y búsqueda Provee una forma de limitar cuáles campos son devueltos desde la API Devuelve algo útil de las peticiones POST, PATCH \u0026amp; PUT HATEOAS todavía no es muy práctico Usa JSON donde sea posible, XML sólo si tienes la obligación Deberías usar camelCase con JSON, pero snake_case es un 20% más fácil de leer Usa Pretty Print por defecto y asegura que gzip esté soportado No uses respuestas encapsuladas por defecto Considera usar JSON para cuerpos de peticiones POST, PUT y PATCH Pagina usando encabezados Link Provee una forma de cargar automáticamente representaciones de datos relacionados al recurso solicitado Provee una forma de sobreescribir el método HTTP Provee encabezados de respuesta útiles para controles de tráfico (rate limiting) Usa autenticación basada en tokens, transportado en OAuth2 donde se necesite delegación Incluir encabezados de respuesta que faciliten el caché Define un error de carga útil (payload) que sea consumible Utilizar efectivamente los códigos de error HTTP 1. Requisitos fundamentales para la API Muchas de las opiniones sobre diseño de API que aparecen en la web son discusiones académicas en torno a interpretaciones subjetivas de las normas difusas en lugar de lo que tiene sentido en el mundo real. Mi objetivo con este artículo es describir las mejores prácticas para una API pragmática diseñada para aplicaciones web de hoy en día. No hago ningún intento de satisfacer un standard si no parece viable. Para ayudar a guiar el proceso de toma de decisiones, he escrito algunos de los requisitos que la API debe cubrir:\n Debería utilizar estándares web donde tengan sentido Debería ser amigable para el desarrollador y ser explorable mediante una barra de direcciones del navegador Debería ser sencilla, intuitiva y consistente para que la adopción no sólo sea fácil, sino también agradable Debería proporcionar suficiente flexibilidad para potenciar mayoritariamente la UI SupportFu Debería ser eficiente, manteniendo el equilibrio con los demás requisitos Una API es una interfaz de usuario (UI) para un desarrollador – al igual que cualquier UI, es importante asegurar que la experiencia del usuario esté pensada cuidadosamente!\n2. Usa acciones y URLs RESTful Si hay una cosa que ha ganado amplia adopción, son los principios REST. Estos fueron presentados por primera vez por Roy Felding en el Capítulo 5 de su disertación sobre arquitecturas de software ubicadas en redes de trabajo.\nLos fundamentales principios de REST se basan en separar tu API en recursos lógicos. Estos recursos son manipulados usando peticiones HTTP donde el método (GET, POST, PUT, PATCH, DELETE) tienen un significado específico.\n¿Pero qué puede hacer un recurso? Bueno, estos deberían ser sustantivos (¡no verbos!) que tengan sentido desde una perspectiva del consumidor de la API. Aunque tus modelos internos pueden mapear cuidadosamente con los recursos, no es necesario que sea un mapeo uno-a-uno. La clave es no filtrarse ningún detalle irrelevante de implementación. Por ejemplo, algunos de los sustantivos de SupportFu podrían ser ticket, usuario y grupo.\nUna vez que tienes tus recursos definidos, necesitas identificar qué acciones aplican a ellos y cómo deberían relacionarse con tu API. Los principios REST proveen estrategias para manejar acciones CRUD usando métodos HTTP relacionados de la siguiente forma:\n GET /tickets- Devuelve una lista de tickets GET /tickets/12- Devuelve un ticket específico POST /tickets- Crea un nuevo ticket PUT /tickets/12- Actualiza el ticket #12 PATCH /tickets/12- Actualiza parcialmente el ticket #12 DELETE /tickets/12- Elimina el ticket #12 La grandeza de REST es que estas impulsando métodos HTTP existentes a implementar funcionalidades importantes en sólo un simple endpoint /tickets. No hay convención de nombres de métodos para seguir y la estructura URL es limpia y clara.\n¿El nombre del Endpoint debería ser singular o plural? La regla mantenlo-simple (keep-it-simple) aplica aquí. Si bien tu gramática interna te dirá que está mal describir una instancia única de un recurso utilizando el plural, la respuesta pragmática es mantener el formato de la URL consistente y siempre usar plural. No tener que lidiar con plurales irregulares (person/people, goose/geese) hace más simple la vida del consumidor de la API y es más sencillo para el proveedor de la API implementarla (como los más modernos frameworks manejarán nativamente /tickets y /tickets/12 bajo un controlador comun).\n¿Pero cómo lidiar con las relaciones? Si una relación puede existir con un sólo recurso, los principios REST proveen una guía útil. Veamos esto con un ejemplo. Un ticket en SupportFu consiste en un número de mensajes. Estos mensajes pueden ser lógicamente mapeados al endpoint /tickets de la siguiente forma:\n GET /tickets/12/messages - Devuelve una lista de mensajes para el ticket #12 GET /tickets/12/messages/5 - Devuelve el mensaje #5 para el ticket #12 POST /tickets/12/messages - Crea un nuevo mensaje en el ticket #12 PUT /tickets/12/messages/5 – Actualiza el mensaje #5 para el ticket #12 PATCH /tickets/12/messages/5 - Actualiza parcialmente el mensaje #5 para el ticket #12 DELETE /tickets/12/messages/5 - Borra el mensaje #5 para el ticket #12 Alternativamente, si una relación puede existir independientemente del recurso, tiene sentido incluir sólo un identificador en la representación de la salida del recurso. El consumidor de la API debería entonces tener que acertar al endpoint de la relación. Sin embargo, si la relación es comunmente requerida junto con el recurso, la API podría ofrecer funcionalidad para automáticamente incluir la representación de la relación y evitar el segundo impacto en la API. ¿Qué ocurre con las acciones que no corresponden a las operaciones CRUD? Aquí es donde las cosas pueden confundirse. Hay un número de enfoques:\n Reestructura la acción para que aparezca como un campo de un recurso. Esto funciona si la acción no toma parámetros. Por ejemplo, un acción “activate” puede ser asignada a un campo booleano activated y actualizado vía PATCH al recurso. Tratalo como un sub-recurso con principios REST. Por ejemplo, la API de GitHub te permite “star a gist“(marcar como importante) con PUT /gists/:id/star y “unstar” (desmarcar) con DELETE /gists/:id/star. A veces realmente no tienes forma de mapear la acción a una estructura REST apropiada. Por ejemplo, una búsqueda multi-recurso no tiene sentido ser asignada a un endpoint de un recurso específico. En este caso, /search podría tener más sentido incluso si no es un sustantivo. Esto está BIEN – sólo realiza lo que sea correcto desde la perspectiva del consumidor de la API y asegúrate de que esté claramente documentado para evitar confusiones. 3. SSL en todos lados – todo el tiempo Usa siempre SSL. Sin excepciones. Hoy, tus APIs web pueden ser accedidas desde cualquier lado donde haya internet (como librerías, cafeterías, aeropuertos, entre otros). No todos son seguros. Muchos no encriptan las comunicaciones, permitiendo facilmente ser espiados o falsificados si son interceptadas las credenciales de autenticación.\nOtra ventaja de usar siempre SSL es que garantiza que las comunicaciones encriptadas simplifiquen los esfuerzos de autenticación – puedes salir simplemente con los tokens de acceso en vez de tener que firmar cada petición a la API.\nHay que tener cuidado con los accesos no-SSL a las URLs de la API. NO las redirecciones a sus homólogas SSL. Es recomendable que lances un error. La última cosa que quieres para tus clientes pobremente configurados es enviar peticiones a un endpoint sin encriptar, sólo para ser redireccionados silenciosamente al verdadero endpoint encriptado.\n4. Documentación Una API es buena tanto como lo sea su documentación. Los docs deberían ser fáciles de encontrar y de acceso público. Muchos desarrolladores revisarán la documentación antes de realizar cualquier esfuerzo para integrarla. Cuando los docs están escondidos dentro de un archivo PDF o están permitido sólo para usuarios identificados, no son entonces sólo difíciles de encontrar sino que también dificultan la búsqueda.\nLos documentos deberían mostrar ejemplos de ciclos completos de petición/respuesta. Preferentemente, las peticiones deberían poder ser “pegadas” – tanto los hipervínculos deberían poder ser pegados en un navegador como los ejemplos de código deberían poder ser pegados en una consola. GitHub y Strip hacen un muy buen trabajo en este aspecto.\nUna vez que liberes una API pública, te comprometes a no romper cosas sin previo aviso. La documentación debe incluir información y detalles sobre futuras actualizaciones a la API que sean visibles al exterior. Las actualizaciones deben ser entregadas a través de un blog (es decir, una lista de cambios) o una lista de correo (preferiblemente ambos).\n5. Versionado Siempre versiona tu API. El versionado te ayuda a iterar más rápido y evitar peticiones inválidas desde endpoints actualizados. Además te ayuda a resolver cualquier transición importante de versión de la API mientras continúas ofreciendo viejas versiones de la API por un período de tiempo.\nHay opiniones cruzadas respecto si la versión de la API debería ser incluida en la URL o en el encabezado. Académicamente hablando, debería probablemente estar en el encabezado. Sin embargo, la versión necesita estar en la URL para asegurar la posibilidad de explorar en el navegador los recursos a través de las versiones (recuerda los requerimientos de la API especificados al inicio del artículo).\nSoy un gran fanático del alcance que Stripe ha tomado respecto al versionado de la API - la URL tiene un número de versión principal (v1), pero la API tiene las sub-versiones basadas en fechas que pueden ser elegidas mediante un encabezado de petición HTTP personalizado. En este caso, la versión principal proporciona la estabilidad estructural de la API en su conjunto, mientras que las sub-versiones representan cambios más pequeños (campos inhabilitados, cambios en el endpoint, etc).\nUna API nunca va a ser completamente estable. El cambio es inevitable. Lo importante es cómo se gestiona el cambio. Anuncios de fechas y planificaciones bien documentados puede ser una buena práctica para muchas APIs. Todo se reduce a lo que es razonable teniendo en cuenta la industria y los posibles consumidores de la API.\n6. Filtrado, ordenación y búsqueda en los resultados Lo mejor es mantener la URL base de recursos tan simple como sea posible. Filtros de resultados complejos, requisitos de ordenamiento y búsqueda avanzada (cuando se limita a un solo tipo de recurso) pueden ser implementados fácilmente como parámetros de consulta en la parte superior de la URL base. Veamos esto en más detalle:\nFiltrado: Usa un único parámetro de consulta por cada campo que implemente el filtro. Por ejemplo, cuando se pide una lista de tickets del endpoint /tickets, podrías querer limitarla a sólo los que están en estado abierto. Esto puede ser logrado con una petición como GET /tickets?state=open. En este caso, state es el parámetro de la consulta que implementa el filtro.\nOrdenación: Similar al filtrado, un parámetro genérico sort puede ser usado para describir las reglas de ordenamiento. Organiza los requerimientos de ordenamiento complejos permitiendo que el parámetro de ordenación sea tomado de una lista de campos separados por coma, cada uno con un posible negativo unario para implicar orden descendiente. Veamos algunos ejemplos:\n GET /tickets?sort=-priority – Devuelve una lista de tickets en orden de prioridad descendiente GET /tickets?sort=-priority,created_at- Devuelve una lista de tickets en orden de prioridad descendiente. Con una prioridad específica, los tickets más viejos son ordenados primero. Búsqueda: A veces los filtros básicos no son suficientes y se necesita la posibilidad de realizar una búsqueda completa sobre el texto. Tal vez ya estés usando ElasticSearch u otra búsqueda basada en la tecnología Lucene. Cuando una búsqueda completa sobre el texto es usada como un mecanismo de devolución de instancias de recurso para un tipo de recurso específico, puede ser expuesto en la API como un parámetro de consulta al endpoint del recurso. Digamos q. Las consultas de búsqueda deberían ser pasadas directamente al motor de búsqueda y la salida de la API deberían estar en el mismo formato que un lista de resultado normal.\nCombinando todo esto, podemos construir consultas como:\n GET /tickets?sort=-updated_at – Devuelve los tickets recientemente actualizados GET /tickets?state=closed\u0026sort;=-updated_at \u0026ndash; Devuelve los tickets recientemente cerrados GET /tickets?q=return\u0026state;=open\u0026sort;=-priority,created_at – Devuelve el ticket abierto de mayor prioridad que menciona la palabra ‘return’ Alias para las consultas comunes Para hacer que la experiencia con la API sea más agradable para el consumidor promedio, considera empaquetar sets de condiciones dentro de una ruta REST facilmente accesible. Por ejemplo, la consulta de tickets cerrados recientemente puede ser empaquetada como _GET /tickets/recentlyclosed.\n7. Limitando los campos que son devueltos por la API El consumidor de la API no siempre necesita la representación completa de un recurso. La habilidad de seleccionar y elegir los campos devueltos permite el doble beneficio de dejar que el consumidor de la API minimice el tráfico de red y acelere su propio uso de la API.\nUsa el parámetro de consulta fields que tome una lista de campos separados con coma. Por ejemplo, la siguiente petición debería traer sólo la información suficiente para mostrar una lista ordenada de tickets abiertos:\nGET /tickets?fields=id,subject,customer_name,updated_at\u0026amp;state;=open\u0026amp;sort;=-updated_at 8. Update \u0026amp; Creation deberían devolver una representación de un recurso Una llamada PUT, POST o PATCH puede hacer modificaciones a los campos del recurso subyacente que no fueron parte de los parámetros provistos (por ejemplo: los campos timestamp created_at o updated_at ). Para evitarle al consumidor de la API tener que consultar nuevamente a la API por un recurso actualizado, agrega el retorno de la actualización (o creación) como parte de la respuesta.\nEn el caso de un POST que sea un resultado de una creación, usa el código de status HTTP 201 e incluye un encabezado Location que apunte a la URL del nuevo recurso.\n9. ¿Deberías HATEOAS? Hay muchas opiniones variadas sobre si el consumidor de la API debería crear hipervínculos o si los hipervínculos deberían ser provistos por la API. Los principios de diseño RESTful especifican HATEOAS, el cual aproximadamente declara que esa interacción con un endpoit debería definirse en la metadata que viene con la respuesta, y no basada en información que va por fuera de la banda (out-of-band).\nA pesar de que la web generalmente trabaja con los principios HATEOAS (ej, cuando vamos a una portada y seguimos hipervínculos basados en lo que vemos en la página), no creo que estemos listos para HATEOAS en la API todavía. Cuando navegamos en un sitio, las decisiones sobre qué hipervínculos van a ser clickeados se hacen durante la ejecución. Sin embargo, con una API, las decisiones como qué peticiones van a ser enviadas son tomadas cuando el código de integración de la API es escrito, no en tiempo de ejecución. ¿Podrían las decisiones ser aplazadas al tiempo de ejecución? Seguro, de todas maneras, no hay mucho que ganar bajando esa ruta al código ya que el código no estaría disponible para manejar cambios significantes en la API sin romperse. Esto significa que HATEOAS es prometedor pero no está listo para ser protagonista todavía. Algún esfuerzo más tiene que ser realizado para definir los estándars y herramientas al rededor de estos principios para que su potencial sea completamente aprovechado.\nPor ahora es mejor asumir que el usuario tiene acceso a la documentación e incluir los identificadores de recursos en la respuesta, la cual el consumidor de la API usará cuando crea hipervínculos. Hay un par de ventajas en utilizar los identificadores – los datos que viajan sobre la red son minimizados y los datos almacenados por los consumidores de la API también son minimizados (ya que son guardados los identificadores cortos, en vez de las URLs que contienen los identificadores).\nAdemás, dado que este post es partidario de incluir los números de versión en la URL, tiene más sentido a largo plazo para el consumidor de la API almacenar los identificadores y no las URLs. Después de todo, el identificador es estable versión por versión pero la URL que representa no lo es!\n10. Sólo respuestas JSON Es tiempo de dejar XML atras en las APIs. Es verborrágico, es difícil de parsear, dificil de leer, su modelo de datos es incompatible con la mayoría de los modelos de datos de los lenguajes de programación y sus ventajas son irrelevantes cuando tus necesidades primarias de respuesta son serializaciones de una representación de datos interna.\nNo voy a poner mucho esfuerzo en explicar las razones de lo dicho arriba si se puede ver cómo otros (Youtube, Twitter \u0026amp; Box) ya han comenzado el éxodo XML.\nSimplemente te dejaré que veas las gráficas de Google Trends (XML API vs JSON API) para que medites:\n No obstante, si tu base de clientes consiste en un gran número de clientes empresariales, puedes tener que dar soporte XML de todas maneras. Si debes hacerlo, te surgirá una nueva pregunta:\n¿Debería cambiar el tipo del contenido basado en encabezados Accept o basado en la URL?\nPara garantizar la explorabilidad del navegador, debería basarse en la URL. La opción más razonable debería ser agregar una extensión .xml o .json al endpoint de la URL .\n11. snake_case vs camelCase para el nombre de los campos Si estás usando JSON (JavaScript Object Notation) como tu principal formato de representación, la forma “correcta” de hacer las cosas es seguir la convención de nombres de JavaScript – y esto sinifica camelCase para el nombre de los campos! Si entonces optas por el camino de construir librerias cliente en varios lenguajes, lo mejor es usar la convención de nombres correspondiente al idioma – camelCase para C# y Java, snake_case para python y ruby.\nPara pensar: Siempre sentí que snake_case es más fácil para leer que la convención camelCase de JavaScript. Pero no tenía ninguna evidencia para respaldar esta “sensación”, hasta ahora. Basado en un estudio visual sobre camelCase y snake_case (PDF) del 2010, snake_case es un 20% más facil de leer que camelCase! Este impacto en legibilidad puede afectar la explorabilidad de la API y los ejemplos de la documentación.\nMuchas JSON APIs populares usan snake_case. Sospecho que esto se debe a la serialización de librerías que siguen las convenciones de nombres de los lenguajes subyacentes que utilizan. Tal vez necesitamos tener librerías de serialización JSON que manejen las transformaciones de convenciones de nombres.\n12. Pretty print por default y asegura que gzip sea soportado Una API que provee salida con compresión de espacios en blanco no es muy divertida de ver desde un navegador. Aunque algún tipo de parámetro de consulta (como ?pretty=true) puede ser provisto para activar pretty printing, una API que utiliza pretty print por default es mucho más accesible. El costo de transferencia de datos extra es insignificante, especialmente cuando lo comparas con el costo de no implementar gzip.\nConsidera algunos casos de uso: ¿Qué pasa si un consumidor de la API está debuggeando y en su código imprime los datos recibidos de la API? – Serán legibles por default. O si el consumidor graba en la URL el código que fue generando y lo interpreta directamente desde el navegador – Será legible por default. Éstos son pequeños detalles. Pequeños detalles que hacen a una API agradable de usar!\nPero, ¿qué pasa con toda la transferencia extra de datos?\nVeamos esto con un ejemplo del mundo real. He bajado un poco de datos de la API de GitHub, la cual usa pretty print por default. También estuve haciendo algunas comparaciones con gzip:\n$ curl https://api.github.com/users/veesahni \u0026gt; with-whitespace.txt $ ruby -r json -e \u0026#39;puts JSON JSON.parse(STDIN.read)\u0026#39; \u0026lt; with-whitespace.txt \u0026gt; without-whitespace.txt $ gzip -c with-whitespace.txt \u0026gt; with-whitespace.txt.gz $ gzip -c without-whitespace.txt \u0026gt; without-whitespace.txt.gz Los archivos de salida tienen los siguientes tamaños:\n without-whitespace.txt – 1252 bytes with-whitespace.txt – 1369 bytes without-whitespace.txt.gz – 496 bytes with-whitespace.txt.gz – 509 bytes En este ejemplo, el caracter en blanco incrementó el tamaño de la salida en un 8.5% cuando gzip no entró en juego y un 2.6% cuando utilizamos gzip. Por otro lado, el acto de comprimir con gzip en sí mismo provee un 60% de ahorro de ancho de banda. Debido a que el costo del pretty print es relativamente pequeño, es mejor utilizar pretty print por default y asegurar que la compresión con gzip esté soportada.\nPara enfatizar este punto, Twitter descubrió que hay un 80% de ahorro (en algunos casos) cuando habilita la compresión gzip en su API Streaming. Stack Exchange fue más lejos, nunca devuelve una respuesta que no esté comprimida!\n13. No uses un envoltorio por default, pero posibilitalo cuando sea necesario Muchas APIs empaquetan sus respuestas en envoltorios como este:\n{ \u0026#34;data\u0026#34; : { \u0026#34;id\u0026#34; : 123, \u0026#34;name\u0026#34; : \u0026#34;John\u0026#34; } } Hay un par de justificaciones para hacer esto – facilita incluir metadata adicional o información de paginación, algunos clientes REST no permiten fácil acceso a los encabezados HTTP y las peticiones JSONP no tienen acceso a sus encabezados. Sin embargo con standards que están siendo rápidamente adoptados como CORS y Link header from RFC5988, empaquetar se está volviendo innecesario.\nPodemos profundizar a futuro la API manteniéndola sin empaquetamiento por default y empaquetando sólo en casos excepcionales.\n¿Cómo debería usarse un envoltorio en casos excepcionales?\nHay 2 situaciones donde un envoltorio es realmente necesario – si la API necesita soportar peticiones cross domain sobre JSONP o si el cliente es incapaz de trabajar con encabezados HTTP.\nLas peticiones JSONP vienen con un parámetro adicional de consulta (usualmente llamado callback o jsonp) representando el nombre de la función callback. Si este parámetro está presente, la API debería cambiarse a un modo completo de empaquetamiento donde siempre responda con un código de status HTTP 200 y pase el código de status real dentro de la respuesta JSON. Cualquier encabezado HTTP adicional que debería pasar a través de la respuesta debería ser mapeado a los campos JSON, como se ve a continuación:\ncallback_function({ status_code: 200, next_page: \u0026#34;https://..\u0026#34;, response: { ... actual JSON response body ... } }) De forma similar, para soportar clientes con HTTP limitado, habilita un parámetro especial de consulta ?envelope=true, el cual debería disparar un empaquetamiento full (sin la función callback JSONP).\n14. Cuerpos HTML POST, PUT \u0026amp; PATCH codificados en JSON Si estás siguiendo el objetivo de este artículo, entonces has adoptado JSON para todas las salidas de la API. Ahora consideremos JSON para la entrada de la API.\nMuchas APIs usan URL cifradas en sus cuerpos de las peticiones de la API. El cifrado de URL es exactamente lo que suena – los cuerpos de la petición donde los pares clave-valor están cifrados usando las mismas convenciones que uno usaría para cifrar datos en los parámetros de consulta de URL. Esto es simple, ampliamente soportado y deja el trabajo hecho.\nSin embargo, el cifrado de URL tiene algunos inconvenientes que lo hacen problemático. No tiene el concepto de tipos de dato. Esto obliga a la API a interpretar cadenas de caracteres y transformarlas en tipos numéricos (por ej integer) o booleanos. Además, no tiene un concepto real de estructura jerárquica.\nAunque hay algunas convenciones que pueden construir estructuras que no siguen el par clave-valor (como agregar [] a una clave para representar un arreglo), esto no tiene comparación con la estructura nativa jerárquica de JSON.\nSi la API es simple, cifrar la URL puede ser suficiente. Sin embargo, APIs complejas deberían apegarse a JSON para sus entradas a la API. De cualquier manera, elige una y se consistente en toda la API.\nUna API que acepta peticiones POST, PUT y PATCH con cifrado JSON debería también requerir en el encabezado Content-Type seteado con application/json o lanzar un código de status HTTP: 415 Unsopported Media Type.\n15. Paginación Las APIs con preferencia “envelope” (envoltorio) típicamente incluyen los datos de paginación dentro del mismo envoltorio. Y no los culpo – hasta hace poco, no había mejores opciones. La forma correcta de incluir los detalles de paginación hoy en día es utilizando el encabezado Link introducido por RFC 5988.\nUna API que usa el encabezado Link puede devolver un set de hipervínculos listos para que el consumidor de la API no tenga que construir los hipervínculos por su propia cuenta. Esto es especialmente importante cuando la paginación está basada en el cursor. Aquí hay un ejemplo de un encabezado Link utilizado correctamente, obtenido de la documentación de GitHub:\nLink: \u0026lt;https://api.github.com/user/repos?page=3\u0026amp;per_page=100\u0026gt;; rel=\u0026#34;next\u0026#34;, \u0026lt;https://api.github.com/user/repos?page=50\u0026amp;per_page=100\u0026gt;; rel=\u0026#34;last\u0026#34; Pero esto no es una solución completa para muchas APIs que quieren devolver información adicional de paginación, por ejemplo el conteo del total de resultados disponibles. Una API que requiere enviar un contador puede usar un encabezado HTTP personalizado como X-Total-Count.\n16. Representaciones de recursos relacionados a los datos solicitados mediante carga automática Hay muchos casos donde un consumidor de la API necesita cargar datos relacionados (o referenciados) con el recurso que se está solicitando. En vez de pedir que el consumidor haga una solicitud a la API reiteradas veces por esta información, sería mucho más eficiente permitir que los datos relacionados sean devueltos y cargados a través del recurso original en demanda.\nDe todos modos, como esto va contra algunos principios RESTful, podemos minimizar nuestras desviaciones haciendo entonces el parámetro de consulta embed (o expand).\nEn este caso, embed podría ser una lista separada por comas de campos a ser embebidos. La notación con punto puede ser usada para referir sub-campos. Por ejemplo:\nGET /tickets/12?embed=customer.name,assigned_user Esto debería devolver un ticket con detalles adicionales embebidos, como:\n{ \u0026#34;id\u0026#34; : 12, \u0026#34;subject\u0026#34; : \u0026#34;I have a question!\u0026#34;, \u0026#34;summary\u0026#34; : \u0026#34;Hi, ....\u0026#34;, \u0026#34;customer\u0026#34; : { \u0026#34;name\u0026#34; : \u0026#34;Bob\u0026#34; }, \u0026#34;assigned_user\u0026#34;: { \u0026#34;id\u0026#34; : 42, \u0026#34;name\u0026#34; : \u0026#34;Jim\u0026#34; } } Por supuesto, la habilidad de implementar algo así realmente depende de la complejidad interna. Este tipo de embebido puede facilmente resultar en un problema de N+1 select.\n17. Sobreescribiendo el método HTTP Algunos clientes HTTP pueden trabajar solo con peticiones simples GET y POST. Para mejorar la accesibilidad a estos clientes limitados, la API necesita proveer una forma de sobreescribir el método HTTP.\nAunque no hay ningún estandard fuerte aquí, la convención popular es aceptar un encabezado de petición X-HTTP-Method-Override con un valor de cadena que contenga PUT, PATCH o DELETE.\nNota que sobreescribir el encabezado debería ser aceptado en peticiones POST. Las peticiones GET nunca deberían cambiar datos en el servidor!\n18. Limitación de tráfico por ratio (Rate limiting) Para prevenir abusos, una práctica estandard es agregar algún tipo de límite de tráfico a la API. RFC 6585 introduce el código de status HTTP 429 Too Many Requests para controlar esto.\nSin embargo, puede ser muy útil notificar al consumidor de sus límites antes de que se encuentre con ellos. Este es un área en la que actualmente faltan los standards pero existe una cantidad de convenciones populares usando encabezados de respuesta HTTP.\nMinimamente, incluye los siguientes encabezados (usando las convenciones de nombres de Twitter ya que los encabezados tipicamente no tienen capitalizacion de las palabras del medio):\n X-Rate-Limit-Limit – El numero de peticiones permitidas en el período actual X-Rate-Limit-Remaining – El número de peticiones que faltan en el período actual X-Rate-Limit-Reset – El número de segundos restantes en el período actual ¿Por qué se usa el número de segundos restantes en vez de un time stamp para X-Rate-Limit-Reset?\nUn timestamp contiene una cantidad de información útil pero innecesaria como la fecha y probablemente el time-zone. Un consumidor de la API realmente quiere saber cuándo puede enviar la petición nuevamente, y el número de segundos responde a esta pregunta con el mínimo procesamiento adicional al final. Además escapa a problemas relacionados con desvíos de reloj.\nAlgunas APIs usan un timestamp de UNIX (segundos desde la fecha standard 1/1/1970) para X-Rate-Limit-Reset. ¡No hagas lo mismo!\n¿Por qué es una mala práctica usar el timestamp UNIX para X-Rate-Limit-Reset?\nLa spec de HTTP ya especifica el uso del formato de fecha RFC 1123 (actualmente usado en los encabezados HTTP Date, If-Modified-Since y Last-Modified). Si fuéramos a especificar un nuevo encabezado HTTP que tome un timestamp de algún tipo, debería seguir las convenciones RFC 1123 en vez de usar timestamps UNIX.\n19. Autenticación Una API RESTful debería ser stateless (sin estado). Esto significa que la petición de autenticación no debería depender de cookies o sesiones. En lugar de ello, cada petición debería venir con algún tipo de credencial de autorización.\nSiempre que se use SSL, las credenciales de autenticación pueden ser simplificadas a un token de acceso generado de forma aleatoria, que es entregado en el campo de nombre de usuario de HTTP Basic Auth.\nLo grandioso de esto es que es completamente navegable con un explorador – éste simplemente abriría un popup pidiéndote que ingreses las credenciales si recibe un código de status 401 Unauthorized desde el servidor.\nDe todos modos, este método de autenticación token-over-basic-auth (token sobre autenticación basica) es sólo aceptable en los casos en que sea práctico tener la posibilidad de que el usuario copie un token de una interface de administración del entorno del consumidor de la API.\nEn los casos donde no sea posible, OAuth 2 debería ser usado para facilitar la transferencia del token seguro a terceros. OAuth 2 usa tokens Bearer y además depende de SSL para su encriptación de transporte subyacente.\nUna API que necesita soporte JSONP necesitará un tercer método de autenticación, ya que las peticiones JSONP no pueden enviar credenciales HTTP Basic Auth ni Bearer tokens. En este caso, puede utilizarse un parámetro especial de consulta “access_token”. Nota: hay un problema de seguridad inherente si se usa un parametro de consulta para el token ya que la mayoría de los servidores web almacenan los parámetros de consulta en sus logs.\nPara lo que nos interesa, los tres métodos de arriba son sólo formas de transportar el token a través de la frontera de la API. El verdadero token subyacente mismo podría ser idéntico.\n20. Cacheo HTTP provee un framework de cacheo incluido! Todo lo que tienes que hacer es incluir algunos encabezados adicionales en la respuesta de salida y hacer una pequeña validación cuando recibes algún encabezado de petición de entrada.\nHay 2 alcances: ETag y Last-Modified\nETag: Cuando generas una petición, incluye un encabezado HTTP ETag conteniendo un hash o checksum de la representación. Este valor debería cambiar cada vez que la salida cambia. Ahora, si una petición de entrada HTTP contiene un encabezado If-None-Match con un valor ETag, la API debería devolver un código de status 304 Not Modified en lugar de la salida del recurso.\nLast-Modified (Último modificado): Básicamente funciona como ETag, excepto en que usa timestamps. El encabezado de respuesta Last-Modified contiene un timestamp en formato RFC 1123 el cual es validado contra If-Modified-Since. Nótese que la especificación de HTTP ha tenido 3 formatos de fecha diferentes aceptables y el servidor debería estar preparado para aceptar cualquiera de ellos.\n21. Errores Sencillamente como una página HTML de error muestra un mensaje de error útil a un visitante, una API debería proveer un mensaje de error útil en un formato conocido. La representación de un error debería no ser diferente a la representación de cualquier recurso, con su propio set de campos.\nLa API debería devolver siempre códigos de status HTTP prácticos. Los errores de la API generalmente caen dentro de 2 tipos: la serie 400 de códigos de status para problemas en el cliente y la serie 500 de códigos de status para problemas en el servidor. Como mínimo, la API debería estandarizar que todos los errores de la serie 400 vengan en formato de error JSON. Si es posible (por ejemplo si los balanceadores de carga y proxies reversos pueden crear cuerpos de error personalizables), este debería extender la serie de códigos de error 500.\nEl cuerpo de un error JSON debería proveer algunas cosas para el desarrollador – un mensaje de error útil, un código de error único (que pueda ser buscado para más detalles en la documentación) y una descripción detallada. Una representación de salida JSON de esta forma podría ser:\n{ \u0026#34;code\u0026#34; : 1234, \u0026#34;message\u0026#34; : \u0026#34;Something bad happened :(\u0026#34;, \u0026#34;description\u0026#34; : \u0026#34;More details about the error here\u0026#34; } Los errores de validación para peticiones PUT, PATCH y POST necesitarán un breakdown en el campo. Esto se modela mejor utilizando un código de error de alto nivel arreglado para fallas de validación que proveen detalles del error en el campo adicional error, como por ejemplo:\n{ \u0026#34;code\u0026#34; : 1024, \u0026#34;message\u0026#34; : \u0026#34;Validation Failed\u0026#34;, \u0026#34;errors\u0026#34; : [ { \u0026#34;code\u0026#34; : 5432, \u0026#34;field\u0026#34; : \u0026#34;first_name\u0026#34;, \u0026#34;message\u0026#34; : \u0026#34;First name cannot have fancy characters\u0026#34; }, { \u0026#34;code\u0026#34; : 5622, \u0026#34;field\u0026#34; : \u0026#34;password\u0026#34;, \u0026#34;message\u0026#34; : \u0026#34;Password cannot be blank\u0026#34; } ] } 22. Códigos de estado HTTP HTTP define un set de significativos códigos de status que pueden ser devueltos por la API. Éstos pueden ser nivelados para ayudar a los consumidores de la API dirigir sus respuestas apropiadamente. A continuación les dejo una lista de los que definitivamente deberías utilizar:\n 200 OK - Respuesta a un exitoso GET, PUT, PATCH o DELETE. Puede ser usado también para un POST que no resulta en una creación. 201 Created – [Creada] Respuesta a un POST que resulta en una creación. Debería ser combinado con un encabezado Location, apuntando a la ubicación del nuevo recurso. 204 No Content – [Sin Contenido] Respuesta a una petición exitosa que no devuelve un body (como una petición DELETE) 304 Not Modified – [No Modificada] Usado cuando el cacheo de encabezados HTTP está activo 400 Bad Request – [Petición Errónea] La petición está malformada, como por ejemplo, si el contenido no fue bien parseado. 401 Unauthorized – [Desautorizada] Cuando los detalles de autenticación son inválidos o no son otorgados. También útil para disparar un popup de autorización si la API es usada desde un navegador. 403 Forbidden – [Prohibida] Cuando la autenticación es exitosa pero el usuario no tiene permiso al recurso en cuestión. 404 Not Found – [No encontrada] Cuando un recurso no existente es solicitado. 405 Method Not Allowed – [Método no permitido] Cuando un método HTTP que está siendo pedido no está permitido para el usuario autenticado. 410 Gone – [Retirado] Indica que el recurso en ese endpoint ya no está disponible. Útil como una respuesta en blanco para viejas versiones de la API 415 Unsupported Media Type – [Tipo de contenido no soportado] Si el tipo de contenido que solicita la petición es incorrecto 422 Unprocessable Entity – [Entidad improcesable] Utilizada para errores de validación 429 Too Many Requests – [Demasiadas peticiones] Cuando una petición es rechazada debido a la tasa límite . En conclusión Una API es una interfaz de usuario para desarrolladores. Enfoca tu esfuerzo en asegurar que no sea sólo usable a nivel funcional sino también amigable.\nReferencias Vinay Sahni | Best Practices for Designing a Pragmatic RESTful API ", "wordCount": "9719", "mainEntityOfPage": "https://elbauldelprogramador.com/buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica/", "headline": "Buenas prácticas para el Diseño de una API RESTful Pragmática", "datePublished" : "2016-01-01T00:00:00&#43;0000", "dateModified" : "2017-09-24T19:21:18&#43;0100", "description": "Esta es una traducción lo más literal posible del artículo original, ya que quería preservar la opinión personal del autor así como también el destacable trabajo de investigación y análisis que realizó.", "url": "https://elbauldelprogramador.com/buenas-practicas-para-el-diseno-de-una-api-restful-pragmatica/", "image": { "@type": "ImageObject", "url": "https://elbauldelprogramador.com/img/2014/01/201305-xml-vs-json-api.png", "width": 800, "height": 420 }, "author": { "@type": "Person", "name": "Lucila Armentano", "url" : "https://elbauldelprogramador.com", "sameAs" : [ "https://www.twitter.com/Luzcila", "https://www.linkedin.com/in/armentanolucila", "https://plus.google.com/+LucilaArmentano", ] }, "publisher": { "@type": "Organization", "name": "El Baúl del programador", "url": "https://elbauldelprogramador.com", "logo": { "@type": "ImageObject", "url": "https://elbauldelprogramador.com/img/bio-photo.png", "width": 150 }, "sameAs": ["http://plus.google.com/+elbauldelprogramador", "https://twitter.com/elbaulp", "https://telegram.me/elbaulp"] } } }</script><style>html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}a{-webkit-tap-highlight-color:transparent}h1,h2,h3,h4,h5,h6{font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal}.text-center{text-align:center}.flex-grid article{opacity:0}.flex-grid article.shown{-ms-filter:none;-webkit-filter:none;filter:none;opacity:1}.flex-grid article.animate{-webkit-transform:translateY(200px);transform:translateY(200px);-webkit-animation:moveUp .65s ease forwards;animation:moveUp .65s ease forwards}@-webkit-keyframes pulse{from{opacity:.4;top:0}50%{-ms-filter:none;-webkit-filter:none;filter:none;opacity:1;top:-10px}to{opacity:.4;top:0}}@keyframes pulse{from{opacity:.4;top:0}50%{-ms-filter:none;-webkit-filter:none;filter:none;opacity:1;top:-10px}to{opacity:.4;top:0}}@-webkit-keyframes moveUp{100%{-webkit-transform:translateY(0);transform:translateY(0);-ms-filter:none;-webkit-filter:none;filter:none;opacity:1}}@keyframes moveUp{100%{-webkit-transform:translateY(0);transform:translateY(0);-ms-filter:none;-webkit-filter:none;filter:none;opacity:1}}.icons-home{text-align:center}.icons-home a{display:inline-block;padding:.938rem;margin:.125rem;border-radius:50%;border:.125rem solid #fff;line-height:0;-webkit-transition:all .7s;transition:all .7s}.icons-home a .icon{fill:#fff;width:18px;height:18px}@media only screen and (min-width:37.5rem){.icons-home a .icon{width:30px;height:30px}}.icons-home a:hover{background:#fff}.icons-home a:hover .icon{fill:#002f4c}.down{position:absolute;bottom:50px;width:100%;display:block;text-align:center}.down .icon{position:absolute;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:100px;height:100px;fill:#fff;-webkit-animation:pulse 1.3s infinite;animation:pulse 1.3s infinite}.flag-en,.flag-es{width:32px;height:32px;vertical-align:middle}@media only screen and (max-width:20rem){.flag-en,.flag-es{width:19px;height:19px}}body{left:0;right:0;margin:auto}#mySidebar,a,body{-webkit-transition:all .25s ease;transition:all .25s ease}.dosearch,a.slideButton{position:fixed;display:block;width:40px;height:40px;top:10px;z-index:17}.slideButton{right:10px}.dosearch{right:2.5rem;border-radius:.188rem;padding:.125rem .188rem}.icon-menu{cursor:pointer;padding:.313rem;border-radius:.188rem;width:1.875rem;height:1.875rem;fill:#002f4c}.icon-search{width:2rem;height:2rem}#mySidebar{display:none;position:fixed;height:100%;width:15rem;top:0;right:0;background-color:#002f4c;z-index:2;-webkit-box-shadow:inset -10px -1px 15px -9px rgba(0,0,0,.5);box-shadow:inset -10px -1px 15px -9px rgba(0,0,0,.5)}#mySidebar h2{text-align:center;margin:0 0 .625rem;font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal;font-size:1.25rem;color:#fff}#mySidebar nav{height:40rem;overflow-y:auto;overflow-x:hidden}#mySidebar nav ul{padding:0}#mySidebar nav li{margin:0;list-style-type:none}#mySidebar nav li a{width:100%;display:block;padding:1.25rem;text-decoration:none;font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;color:#fff;border-top:1px solid #fff}#mySidebar nav li a:hover{color:#002f4c;background:#fff}#mySidebar nav .feed{border-bottom:1px solid #fff}#mySidebar.slide{right:0}.w3-animate-right{position:relative;-webkit-animation:animateright .4s;animation:animateright .4s}@-webkit-keyframes animateright{from{right:-300px;opacity:0}to{right:0;-ms-filter:none;-webkit-filter:none;filter:none;opacity:1}}@keyframes animateright{from{right:-300px;opacity:0}to{right:0;-ms-filter:none;-webkit-filter:none;filter:none;opacity:1}}.w3-sidebar{padding-top:6.25rem;height:100%;width:12.5rem;position:fixed;z-index:1;overflow:auto;background-color:#002f4c}@media only screen and (min-width:93.75rem){.w3-sidebar.w3-collapse{display:block!important}}.w3-card{-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}.w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;border:none;white-space:normal;float:none;outline:0}@media only screen and (min-width:93.75rem){.w3-bar-block .w3-bar-item.w3-hide-large{display:none!important}}@media only screen and (max-width:93.688rem){.w3-bar-block .w3-bar-item.w3-hide-large{display:block}}.w3-large{font-size:1.125rem}.w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;border:none;white-space:normal;float:none;outline:0}#mySidebar .w3-button{border:none;display:inline;padding:8px 16px;vertical-align:middle;overflow:hidden;text-decoration:none;color:inherit;background-color:inherit;cursor:pointer;white-space:nowrap;color:#fff;width:auto;font-size:1.5rem}#mySidebar .w3-button:hover{color:#002f4c;background:#fff}.search{max-width:50rem;margin:0 auto}.search input#search-query{width:100%;padding:1rem}html{background-color:#fff}.img-rounded{border-radius:50%}.support-us{max-width:35rem;margin:0 auto;background-color:#f2f2f2}.support-us #ad-slot{max-width:18.75rem;margin:0 auto}.support-us p,.support-us ul li{font-size:.813rem;margin:0;padding:.313rem 0}.image-credit,figcaption{width:auto;max-width:35rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;text-align:center;font-style:italic;font-size:.625rem;margin-top:.313rem}.image-credit::after,figcaption::after{content:'';display:table;clear:both}.image-credit a.externalLink:after,figcaption a.externalLink:after{display:none}.paginator-container{width:50rem;text-align:center;margin:0 auto}.paginator-container .paginator{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap}.paginator-container .paginator a{-ms-flex:auto;-webkit-box-flex:1;flex:auto;text-decoration:none;font-size:3.125rem;color:#002f4c}.near-posts{width:auto;max-width:50rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap;-webkit-box-align:center;-ms-align-items:center;-ms-flex-align:center;align-items:center;border-top:2px dashed #002f4c;padding-top:.625rem}.near-posts::after{content:'';display:table;clear:both}.near-posts .post-item{-ms-flex:1 1 .625rem;-webkit-box-flex:1;flex:1 1 .625rem;font-size:.938rem;border-bottom:none}@media only screen and (min-width:37.5rem){.near-posts .post-item{font-size:1.25rem}}amp-youtube{max-width:50rem;margin:0 auto}body,html{height:100%}.header-post{background-color:#002f4c}.header-post .content{width:95%;text-align:center;padding:5rem 0 1rem}.bar-header{background:#fff;padding:.625rem 1.25rem;-webkit-box-shadow:0 -3px 9px #000;box-shadow:0 -3px 9px #000;position:fixed;width:100%;z-index:10;top:0}.bar-header .logo{margin:0;line-height:2.188rem}.bar-header .logo a#logo{color:#002f4c;text-decoration:none;font-size:1.75rem}.bar-header .logo a#logo:before{content:url(/img/logo.png);vertical-align:middle}.bar-header .logo a#logo:after{-webkit-transition:all .4s;transition:all .4s;content:'El Baúl'}@media only screen and (min-width:37.5rem){.bar-header .logo a#logo:after{content:'El Baúl del Programador'}}.bar-header a{text-decoration:none}.header-post{width:100%}.header-post .content{margin:auto;max-width:50rem}.header-post .subheader{padding:20px}.header-post .subheader a{border:2px solid #fff;border-radius:20px;padding:0 10px}@media only screen and (min-width:37.5rem){.header-post .subheader a{padding:0 10px}}.header-post .date{font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;font-size:1rem}.header-post h1{font-size:1.875rem;margin:0 0 30px;text-shadow:3px 3px #00263d}@media only screen and (min-width:37.5rem){.header-post h1{font-size:2.813rem}}.header-post .subtitle{font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;font-size:.938rem}.header-post .date,.header-post .subtitle,.header-post h1{color:#fff;text-align:center}.header-post a,.header-post p{color:#fff;text-decoration:none;font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;font-size:.938rem}main{padding-top:6.25rem;background-color:#fff}.row{width:auto;max-width:64.375rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0}.row::after{content:'';display:table;clear:both}.row-post{width:auto;max-width:50rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0}.row-post::after{content:'';display:table;clear:both}.row-post .box-item{-ms-flex:1 0 200px;-webkit-box-flex:1;flex:1 0 200px}.flex-grid{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap}.title-category{width:auto;max-width:62.5rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;font-size:2.5rem;margin-top:0;text-transform:uppercase;padding:0 .938rem}.title-category::after{content:'';display:table;clear:both}.box-item{-ms-flex:1 0 300px;-webkit-box-flex:1;flex:1 0 300px;margin:0 .938rem 3.125rem;display:inline-block;border:1px solid #eee;border-radius:5px;min-height:17.813rem;-webkit-transition:all .3s;transition:all .3s;position:relative}.box-item:hover{-webkit-box-shadow:1px 2px 10px #eee;box-shadow:1px 2px 10px #eee}.box-item a{text-decoration:none}.box-item a:hover .box-item{-webkit-box-shadow:10px 10px 10px #eee;box-shadow:10px 10px 10px #eee}.box-item .box-body{font-family:'Libre Baskerville',serif;font-weight:400;font-style:normal;padding:1.563rem}.box-item .box-body time{font-size:.875rem;color:#b2bac2}.box-item .box-body h2{margin:.313rem 0 .938rem;font-size:1.25rem;font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal;color:#002f4c}.box-item .box-body p{margin:0 0 1.25rem;color:#576366;font-size:.875rem;line-height:1.375rem}.box-item .box-body .tags a{color:#002f4c;padding:.313rem .625rem;border-radius:3px;display:inline-block;margin:0 0 .313rem;z-index:50}.ribbon{position:absolute;right:-5px;top:-5px;z-index:1;overflow:hidden;width:75px;height:75px;text-align:right}.ribbon span{font-size:.75rem;font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal;color:#fff;text-transform:uppercase;text-align:center;line-height:20px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform:rotate(45deg);width:100px;display:block;background:#b31917;position:absolute;top:19px;right:-21px}.ribbon span:before{content:"";position:absolute;left:0;top:100%;z-index:-1;border-left:3px solid #002f4c;border-right:3px solid transparent;border-bottom:3px solid transparent;border-top:3px solid #002f4c}.ribbon span:after{content:"";position:absolute;right:0;top:100%;z-index:-1;border-left:3px solid transparent;border-right:3px solid #002f4c;border-bottom:3px solid transparent;border-top:3px solid #002f4c}h1#taxo-item{margin:0 auto;text-align:center;padding-bottom:1.5rem}.tag-title:before{display:block;content:" ";margin-top:-60px;height:75px;visibility:hidden}.post{background:#fff}.page{margin-top:3.75rem}.post-content div#taxo{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-ms-justify-content:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.post-content .tags{margin-top:1.875rem}.post-content .tags a{font-size:.875rem;color:#002f4c;display:inline-block;border:1px solid #002f4c;border-radius:.313rem;padding:.25rem .625rem;margin-right:.125rem;margin-bottom:.5rem;text-decoration:none}.post-content figure{margin:0 auto}.post-content img{margin:0 auto;margin-bottom:.313rem;display:block}.post-content figure img{-o-object-fit:scale-down;object-fit:scale-down}.post-content .button-post,.post-content .tags,.post-content h1,.post-content h2,.post-content h3,.post-content h4,.post-content h5,.post-content h6,.post-content iframe,.post-content ol,.post-content p,.post-content ul{color:#002f4c;width:auto;max-width:35rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;padding:0 1.25rem;font-family:'Libre Baskerville',serif;font-weight:400;font-style:normal;font-size:1rem;line-height:1.875;letter-spacing:.01rem}.post-content .button-post::after,.post-content .tags::after,.post-content h1::after,.post-content h2::after,.post-content h3::after,.post-content h4::after,.post-content h5::after,.post-content h6::after,.post-content iframe::after,.post-content ol::after,.post-content p::after,.post-content ul::after{content:'';display:table;clear:both}.post-content li{padding:.625rem 0}.post-content ul{margin-bottom:0}.post-content li,.post-content p{color:#212121}.post-content li code,.post-content p code{color:#002f4c;word-wrap:break-word}.post-content a{color:#002f4c;border-bottom:1px dashed #002f4c;font-family:'Libre Baskerville',serif;font-weight:400;font-style:normal;text-decoration:none;-webkit-transition:all .3s;transition:all .3s}.post-content a:hover{background:#002f4c;color:#fff}.post-content .externalLink:after{display:inline-block;content:'';color:#002f4c;background-image:url(../img/external.svg);background-size:100%;margin-left:.313rem;width:1.125rem;height:1.125rem}.post-content iframe{margin-top:1.875rem;width:100%}.post-content #twitter-widget-0,.post-content .instagram-media{margin:auto}.post-content h1,.post-content h2,.post-content h3,.post-content h4,.post-content h5,.post-content h6{font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal}.post-content h1{font-size:1.563rem;line-height:1.4}.post-content h2{font-size:1.375rem;line-height:1.4}.post-content h3{font-size:1.125rem;line-height:1.4}.post-content ol,.post-content ul{padding-left:2.5rem}.post-content ul.post-list{padding:0}.post-content ul.post-list.svg-serie p{padding:0}@media only screen and (max-width:37.5rem){.post-content ul.post-list{padding:0 1.25rem}}.post-content blockquote{width:auto;max-width:35rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;border-left:.313rem solid #002f4c;padding:0 1.875rem;margin:3.125rem auto}.post-content blockquote::after{content:'';display:table;clear:both}.post-content blockquote p{color:rgba(0,0,0,.6);margin:0}@media only screen and (max-width:37.5rem){.post-content blockquote p{font-size:1.125rem;line-height:1.5;padding:0}}.post-content hr{width:auto;max-width:47.5rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;border:1px solid #f2f2f2;margin:50px auto}.post-content hr::after{content:'';display:table;clear:both}.post-content>table{margin:3.125rem auto}@media only screen and (max-width:37.5rem){.post-content>table{display:none}}.post-content>table td,.post-content>table th{border:.125rem solid #ccc;padding:.313rem}.post-content td>pre{padding:0;margin:0}.post-content td.gutter.gl{padding-right:1.563rem;line-height:1.5rem}.post-content #guides-container{width:auto;max-width:64.375rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0}.post-content #guides-container::after{content:'';display:table;clear:both}.post-content #guides-container img{margin:5px}.tag-title{font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;font-size:2.25rem;width:auto;max-width:35rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0}.tag-title::after{content:'';display:table;clear:both}@media only screen and (max-width:37.5rem){.tag-title{font-size:1.75rem;margin-top:1.25rem;padding:0 1.25rem}}.post-list{list-style:none;margin:1.563rem auto}@media only screen and (max-width:37.5rem){.post-list{padding:0 1.25rem}}.post-list a{display:block;border-bottom:1px solid #dadada;padding:.625rem 0;text-decoration:none;-webkit-transition:all .5s;transition:all .5s}.post-list a:hover{color:#001726;border-bottom:1px solid #001726;background:#fff}.post-list .entry-date{float:right}@media only screen and (max-width:37.5rem){.post-list .entry-date{display:none}}.box-item h2{margin:.313rem 0 .938rem;font-size:1.25rem;font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal;color:#002f4c}.box-item p{margin:0 0 1.25rem;color:#576366;font-size:.875rem;line-height:1.375rem}.box-item div.tags a{color:#002f4c;padding:.313rem .625rem;border-radius:3px;display:inline-block;margin:0 0 .313rem;z-index:50}.share{width:auto;max-width:560px;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;text-align:center;border-top:1px solid #f2f2f2;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-justify-content:space-between;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.share::after{content:'';display:table;clear:both}article .share{border-top:none}.share svg{margin:.938rem;width:35px;height:35px}@media only screen and (max-width:37.5rem){.share svg{width:16px;height:16px}}.share a{text-decoration:none;border:none}.author .share{width:auto;max-width:560px;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;text-align:center;border-top:1px solid #f2f2f2}.author .share::after{content:'';display:table;clear:both}article .author .share{border-top:none}.author .share a{text-decoration:none;border:none}.subscribe{position:fixed;top:10px;z-index:17;right:5.625rem;min-height:2.5rem}.subscribe a{text-decoration:none}.subscribe svg{margin:0 .5rem;width:32px;height:32px}@media only screen and (max-width:48rem){.subscribe{-ms-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;text-align:center;margin-bottom:1rem;margin-top:-1rem;position:relative;right:0;min-height:0;top:0;z-index:0}}.icon-twitter{fill:#1da1f2}.icon-facebook{fill:#3b5998}.icon-google-plus{fill:#db4437}.icon-mail{fill:#2f56a7}.icon-rss{fill:#f79635}.icon-github{fill:#333}.icon-stack-overflow{fill:#f48024}.icon-linkedin{fill:#0077b5}.icon-telegram{fill:#54b3e6}.icon-medium1{fill:#d0d0d0}.icon-medium2{fill:#a1a1a1}.icon-medium3{fill:grey}.icon-medium4{fill:#575757}figure#medium{max-width:8rem}pre{width:100%;margin:1rem 0;font-size:.875rem}@media only screen and (min-width:37.5rem){pre{margin:1.563rem 0}}pre code{width:auto;max-width:35rem;float:none;display:block;margin-right:auto;margin-left:auto;padding-left:0;padding-right:0;padding:0 1.25rem;overflow-x:auto}pre code::after{content:'';display:table;clear:both}pre span{line-height:1.5rem;font-family:Monaco,Consolas,Menlo,monospace}.highlight .hll{background-color:#ffc}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{color:#000;font-weight:700}.highlight .o{color:#000;font-weight:700}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:700;font-style:italic}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:700;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .ge{color:#000;font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:700}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{color:#000;font-weight:700}.highlight .kd{color:#000;font-weight:700}.highlight .kn{color:#000;font-weight:700}.highlight .kp{color:#000;font-weight:700}.highlight .kr{color:#000;font-weight:700}.highlight .kt{color:#458;font-weight:700}.highlight .m{color:#099}.highlight .s{color:#d01040}.highlight .na{color:teal}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:700}.highlight .no{color:teal}.highlight .nd{color:#3c5d5d;font-weight:700}.highlight .ni{color:purple}.highlight .ne{color:#900;font-weight:700}.highlight .nf{color:#900;font-weight:700}.highlight .nl{color:#900;font-weight:700}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{color:#000;font-weight:700}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d01040}.highlight .sc{color:#d01040}.highlight .sd{color:#d01040}.highlight .s2{color:#d01040}.highlight .se{color:#d01040}.highlight .sh{color:#d01040}.highlight .si{color:#d01040}.highlight .sx{color:#d01040}.highlight .sr{color:#009926}.highlight .s1{color:#d01040}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:teal}.highlight .vg{color:teal}.highlight .vi{color:teal}.highlight .il{color:#099}.author{background:#f2f2f2;display:table;width:100%;padding-top:.313rem}.author .details{margin:auto;max-width:35rem;padding:0 1.25rem;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-flow:column nowrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column nowrap}.author .details #author-photo{-ms-flex:1 0 5.625rem;-webkit-box-flex:1;flex:1 0 5.625rem;margin:.625rem}@media only screen and (max-width:37.5rem){.author .details{text-align:center;-ms-flex-flow:column wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column wrap}.author .details #author-photo{margin:0 auto}}.author amp-img,.author img{border-radius:50%;display:block;margin:auto}.author .def{color:grey;font-size:.625rem;font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;margin:.625rem;text-align:center}@media only screen and (min-width:37.5rem){.author .def{margin:0}}.author .name{margin:0}.author .name a{font-family:'Libre Baskerville',serif;font-weight:800;font-style:normal;text-decoration:none;border-bottom:none;color:#000;font-size:.875rem}.author .name a:hover{color:#002f4c}.author .desc{font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;margin:.625rem;font-size:.75rem}.author .email{text-decoration:none;color:#002f4c}.author .social{width:24px;height:24px}.comments{padding:1.25rem}footer{background:#002f4c;padding:1.563rem 0;margin-top:.938rem}footer a,footer p{text-decoration:none;font-family:'Libre Baskerville',serif;font-weight:300;font-style:normal;color:#fff;text-align:center;margin:0}.box-body .tags a{color:#002f4c;border:1px solid #002f4c}.post-dev .ribbon span{background-color:#e64a19}.post-dev .ribbon span:before{border-left:3px solid #a13411;border-top:3px solid #a13411}.post-dev .ribbon span:after{border-right:3px solid #a13411;border-top:3px solid #a13411}.post-articulos .ribbon span{background-color:#f57c00}.post-articulos .ribbon span:before{border-left:3px solid #ab5700;border-top:3px solid #ab5700}.post-articulos .ribbon span:after{border-right:3px solid #ab5700;border-top:3px solid #ab5700}.post-android .ribbon span{background-color:#689f38}.post-android .ribbon span:before{border-left:3px solid #496f27;border-top:3px solid #496f27}.post-android .ribbon span:after{border-right:3px solid #496f27;border-top:3px solid #496f27}.post-linux .ribbon span{background-color:#2196f3}.post-linux .ribbon span:before{border-left:3px solid #0a6bb7;border-top:3px solid #0a6bb7}.post-linux .ribbon span:after{border-right:3px solid #0a6bb7;border-top:3px solid #0a6bb7}.post-security-now .ribbon span{background-color:#00bcd4}.post-security-now .ribbon span:before{border-left:3px solid #008494;border-top:3px solid #008494}.post-security-now .ribbon span:after{border-right:3px solid #008494;border-top:3px solid #008494}.post-seguridad .ribbon span{background-color:#00bcd4}.post-seguridad .ribbon span:before{border-left:3px solid #008494;border-top:3px solid #008494}.post-seguridad .ribbon span:after{border-right:3px solid #008494;border-top:3px solid #008494}.post-security .ribbon span{background-color:#00bcd4}.post-security .ribbon span:before{border-left:3px solid #008494;border-top:3px solid #008494}.post-security .ribbon span:after{border-right:3px solid #008494;border-top:3px solid #008494}.post-BaseDeDatos .ribbon span{background-color:#009688}.post-BaseDeDatos .ribbon span:before{border-left:3px solid #00695f;border-top:3px solid #00695f}.post-BaseDeDatos .ribbon span:after{border-right:3px solid #00695f;border-top:3px solid #00695f}.post-datascience .ribbon span{background-color:#3f173f}.post-datascience .ribbon span:before{border-left:3px solid #2c102c;border-top:3px solid #2c102c}.post-datascience .ribbon span:after{border-right:3px solid #2c102c;border-top:3px solid #2c102c}.post-servidores .ribbon span{background-color:#0097a7}.post-servidores .ribbon span:before{border-left:3px solid #006a75;border-top:3px solid #006a75}.post-servidores .ribbon span:after{border-right:3px solid #006a75;border-top:3px solid #006a75}.post-latex .ribbon span{background-color:#b31917}.post-latex .ribbon span:before{border-left:3px solid #7d1210;border-top:3px solid #7d1210}.post-latex .ribbon span:after{border-right:3px solid #7d1210;border-top:3px solid #7d1210}.post-descargas .ribbon span{background-color:#f05033}.post-descargas .ribbon span:before{border-left:3px solid #be290e;border-top:3px solid #be290e}.post-descargas .ribbon span:after{border-right:3px solid #be290e;border-top:3px solid #be290e}</style></head><body><header class="bar-header"><h1 class="logo"><a id="logo" href="https://elbauldelprogramador.com/"></a> <a href="/"><svg class="icon flag-es"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#flag-es"></use></svg> </a><a href="/en/"><svg class="icon flag-en"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#flag-en"></use></svg></a></h1></header><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 805 1024"><path class="path1" d="M741.714 755.429q0 22.857-16 38.857l-77.714 77.714q-16 16-38.857 16t-38.857-16l-168-168-168 168q-16 16-38.857 16t-38.857-16l-77.714-77.714q-16-16-16-38.857t16-38.857l168-168-168-168q-16-16-16-38.857t16-38.857l77.714-77.714q16-16 38.857-16t38.857 16l168 168 168-168q16-16 38.857-16t38.857 16l77.714 77.714q16 16 16 38.857t-16 38.857l-168 168 168 168q16 16 16 38.857z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-google-plus" viewBox="0 0 951 1024"><path class="path1" d="M420 454.857q0 20.571 18.286 40.286t44.286 38.857 51.714 42 44 59.429 18.286 81.143q0 51.429-27.429 98.857-41.143 69.714-120.571 102.571t-170.286 32.857q-75.429 0-140.857-23.714t-98-78.571q-21.143-34.286-21.143-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-24-27.143-42.286t-8.857-41.714q0-20.571 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q44-37.714 104.286-56t124.286-18.286h238.857l-78.857 50.286h-74.857q42.286 36 64 76t21.714 91.429q0 41.143-14 74t-33.714 53.143-39.714 37.143-34 35.143-14 37.714zM336.571 400q21.714 0 44.571-9.429t37.714-24.857q30.286-32.571 30.286-90.857 0-33.143-9.714-71.429t-27.714-74-48.286-59.143-66.857-23.429q-24 0-47.143 11.143t-37.429 30q-26.857 33.714-26.857 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857zM337.714 898.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-27.429-1.143-30.286 0-60 4t-61.429 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 40 20 70.571t52.286 47.429 68 25.143 72.857 8.286zM800.571 398.286h121.714v61.714h-121.714v125.143h-60v-125.143h-121.143v-61.714h121.143v-124h60v124z"/></symbol><symbol id="icon-rss" viewBox="0 0 56.693 56.693" enable-background="new 0 0 56.693 56.693" xml:space="preserve"><path d="M3.428,31.085c6.19,0,12.009,2.418,16.382,6.816c4.381,4.398,6.793,10.256,6.793,16.492h9.539   c0-18.113-14.676-32.848-32.714-32.848V31.085z M3.443,14.174c22.061,0,40.01,18.047,40.01,40.231h9.539   c0-27.445-22.229-49.77-49.549-49.77V14.174z M16.634,47.741c0,3.648-2.959,6.607-6.607,6.607S3.42,51.39,3.42,47.741   c0-3.65,2.958-6.607,6.606-6.607S16.634,44.091,16.634,47.741z"/></symbol><symbol id="icon-mail" viewBox="0 0 56.7 56.7" xml:space="preserve"><path d="M53.1719,14.5953l0.0011-0.0011l-0.0011,0.0008v-1.184c0-2.2468-1.8384-4.0852-4.0853-4.0852l-0.0012,0.0011l-0.0024,0.0018         l0.0036-0.0029H7.3962l0.0161,0.0131l-0.0161-0.012c-2.2468,0-4.0853,1.8384-4.0853,4.0853v27.9073         c0,2.2468,1.8384,4.0851,4.0853,4.0851h1.4543h38.6578v-0.001c4.2856-0.0498,5.5728-1.1102,5.6702-4.0809L53.1719,14.5953z          M46.0429,10.3258L28.1753,23.487L10.4239,10.3258H46.0429z M9.8608,20.5521l16.5508,11.4004l0.0166,0.0115L9.8513,43.4907         L9.8608,20.5521z M10.2886,44.4046l17.0151-11.8314l0.2985,0.2077c0.1716,0.1194,0.3714,0.1792,0.5712,0.1792         c0.1982,0,0.8773-0.39,0.8773-0.39l17.0197,11.8345H10.2886z M46.4973,43.4836L29.9305,31.9641l9.2394-6.3642l7.3274-5.0472V43.4836         z"/></symbol><symbol id="icon-github" viewBox="-91 49.217 56.693 56.693" enable-background="new -91 49.217 56.693 56.693" xml:space="preserve"><g><path d="M-38.1773,78.2347c0.0102,0.0012,0.0215,0.0023,0.0316,0.0023c0.079,0,0.1513-0.0576,0.166-0.1389             c0.0169-0.0915-0.0441-0.1796-0.1355-0.1976c-2.3114-0.4257-4.0026-0.8966-9.7083-0.8491c0.3557-1.3155,0.5476-2.8715,0.586-4.7144             c-0.009-4.9966-2.4006-6.7637-2.8602-7.5937c0.6775-3.7827-0.1129-5.5047-0.4799-6.0953c-1.355-0.4822-4.7143,1.2399-6.5492,2.4537             c-2.9923-0.8751-9.3157-0.7905-11.687,0.2258c-4.3755-3.1335-6.6904-2.6536-6.6904-2.6536s-1.4962,2.6818-0.3952,6.6057             c-1.4397,1.8349-2.5124,3.1335-2.5124,6.5752c0,1.9388,0.2281,3.6743,0.743,5.1896c-2.29-0.0056-7.0897,0.3026-9.3379,0.8582             c-0.0903,0.0226-0.1456,0.1152-0.1242,0.2055c0.0192,0.0768,0.0892,0.1287,0.1649,0.1287c0.0135,0,0.0271-0.0012,0.0406-0.0045             c2.2686-0.5612,7.2286-0.8661,9.3785-0.848c0.1231,0.3264,0.2609,0.6425,0.4133,0.9485c-5.5273,0.1468-7.0174,0.9361-9.3379,1.5154             c-0.1682,0.0429-0.3331,0.0836-0.4934,0.1231c-0.0903,0.0225-0.1468,0.1151-0.1242,0.2054             c0.0192,0.0768,0.088,0.1287,0.1649,0.1287c0.0135,0,0.0271-0.0011,0.0406-0.0045c0.1603-0.0406,0.3252-0.0813,0.4946-0.1242             c2.3273-0.5815,3.8377-1.3754,9.4316-1.5097c1.644,2.9855,4.8148,4.843,10.1625,5.3568c-0.7633,0.5792-1.6802,1.6791-1.8066,2.9505             c-0.9598,0.6211-2.8896,0.8254-4.3903,0.3524c-2.1025-0.664-2.9076-4.8272-6.0557-4.2344             c-0.6821,0.1287-0.5466,0.5782,0.0428,0.9598c0.9598,0.621,1.8632,1.3979,2.5599,3.0521c0.5352,1.2703,1.6599,3.54,5.2168,3.54             c1.4114,0,2.4006-0.1694,2.4006-0.1694S-68.8,93.7168-68.8,94.977c0,1.4532-1.9614,1.8632-1.9614,2.5621             c0,0.2766,0.6493,0.3026,1.171,0.3026c1.0309,0,3.1764-0.8605,3.1764-2.3713c0-1.2003,0.0192-5.236,0.0192-5.9418             c0-1.5436,0.8277-2.0325,0.8277-2.0325s0.1028,8.2396-0.1976,9.3439c-0.3523,1.2986-0.988,1.1145-0.988,1.6938             c0,0.8616,2.5824,0.2112,3.4383-1.6802c0.6617-1.4725,0.3726-9.5551,0.3726-9.5551l0.7057-0.0146c0,0,0.0396,3.7003,0.0158,5.3918             c-0.0248,1.7513-0.1434,3.9668,0.8965,5.0113c0.6832,0.6865,2.8986,1.8914,2.8986,0.7904c0-0.6403-1.2139-1.1664-1.2139-2.8986             c0-1.8846,0-7.4424,0-7.9697c0.9688,0,0.8232,2.6208,0.8232,2.6208l0.0711,4.869c0,0-0.2134,1.7739,1.9185,2.5169             c0.7521,0.2631,2.3622,0.3343,2.4379-0.1072c0.0756-0.4426-1.9388-1.101-1.9569-2.4752c-0.0113-0.8378,0.0373-1.3268,0.0373-4.9684             c0-3.6415-0.489-4.9875-2.1929-6.0602c5.2586-0.5409,8.5129-1.8417,10.0994-5.3264c1.8225,0.0599,5.6387,0.2462,10.0741,1.6023             c0.0158,0.0057,0.0328,0.0079,0.0497,0.0079c0.0723,0,0.1389-0.0474,0.1615-0.1197c0.027-0.0903-0.0226-0.1852-0.1129-0.2123             c-4.3745-1.3381-8.0744-1.547-10.0278-1.6125c0.123-0.3026,0.236-0.6199,0.3365-0.953             C-42.1821,77.3382-40.4864,77.8079-38.1773,78.2347z M-78.0168,83.7743c-0.2105,0-0.3811-0.1138-0.3811-0.2541             c0-0.1403,0.1706-0.254,0.3811-0.254c0.2104,0,0.3811,0.1138,0.3811,0.254C-77.6357,83.6605-77.8064,83.7743-78.0168,83.7743z              M-77.2123,84.1649c0-0.1403,0.1706-0.2541,0.381-0.2541c0.2105,0,0.3811,0.1138,0.3811,0.2541s-0.1706,0.254-0.3811,0.254             C-77.0417,84.4189-77.2123,84.3052-77.2123,84.1649z M-76.4878,85.0259c0-0.1403,0.1707-0.2541,0.3811-0.2541             s0.3811,0.1138,0.3811,0.2541c0,0.1403-0.1707,0.254-0.3811,0.254S-76.4878,85.1662-76.4878,85.0259z M-75.4715,86.2539             c-0.2105,0-0.3812-0.1138-0.3812-0.2541s0.1707-0.2541,0.3812-0.2541c0.2104,0,0.3811,0.1138,0.3811,0.2541             S-75.261,86.2539-75.4715,86.2539z M-74.7469,87.1713c-0.2105,0-0.3811-0.1137-0.3811-0.254s0.1706-0.2541,0.3811-0.2541             c0.2104,0,0.381,0.1138,0.381,0.2541S-74.5365,87.1713-74.7469,87.1713z M-73.7684,87.9524c-0.2104,0-0.381-0.1138-0.381-0.2541             c0-0.1403,0.1706-0.254,0.381-0.254c0.2105,0,0.3811,0.1138,0.3811,0.254C-73.3873,87.8386-73.5579,87.9524-73.7684,87.9524z              M-72.3992,88.4605c-0.2105,0-0.3811-0.1138-0.3811-0.2541c0-0.1403,0.1706-0.254,0.3811-0.254             c0.2104,0,0.3811,0.1138,0.3811,0.254C-72.0181,88.3467-72.1887,88.4605-72.3992,88.4605z M-71.0254,88.4605             c-0.2105,0-0.3811-0.1138-0.3811-0.2541c0-0.1403,0.1706-0.254,0.3811-0.254c0.2104,0,0.381,0.1138,0.381,0.254             C-70.6443,88.3467-70.8149,88.4605-71.0254,88.4605z M-69.6468,88.244c-0.2104,0-0.3811-0.1137-0.3811-0.254             s0.1707-0.254,0.3811-0.254c0.2105,0,0.3812,0.1137,0.3812,0.254S-69.4363,88.244-69.6468,88.244z M-58.853,82.8356             c-1.1366,0.0377-2.3154,0.0568-3.5027,0.0568c-1.199,0-2.3565-0.0195-3.4398-0.0582c-5.7773-0.2026-8.9593-2.6409-8.9593-6.8653             c0-0.4387,0.0928-1.9808,1.2881-3.4138c1.1617-1.3927,2.9417-2.1292,5.1478-2.1292c0.1503,0,0.4193,0.0166,0.9651,0.0504             c1.1697,0.0728,3.1276,0.1945,5.0663,0.1945c1.7554,0,3.531-0.1296,4.4849-0.1994c0.4465-0.0328,0.6258-0.0455,0.7411-0.0455             c4.6929,0,6.3649,2.9985,6.3649,5.8044C-50.6965,79.1217-52.1116,82.6148-58.853,82.8356z"/><path d="M-79.1647,86.4891c0.9093,0,0.0154-1.4104-0.0001-2.0701C-79.1689,85.0611-80.074,86.4891-79.1647,86.4891z"/><path d="M-61.4556,80.4198c-0.0936,0-0.1694,0.0759-0.1694,0.1694c0,0.3732-0.4386,0.7904-1.0256,0.7904             c-0.0847,0-0.1662-0.0093-0.2441-0.0261c-0.1949-0.0419-0.367-0.13-0.5078-0.2336c-0.0282-0.0207-0.0551-0.0421-0.0807-0.0638             c-0.0768-0.0651-0.1416-0.1336-0.1927-0.1989c-0.0851-0.1087-0.1321-0.2083-0.1321-0.268c0-0.0935-0.0758-0.1694-0.1694-0.1694             s-0.1694,0.0759-0.1694,0.1694c0,0.0483,0.0099,0.1022,0.0288,0.1595c0.0285,0.0859,0.0774,0.1796,0.1441,0.2737             c0.0667,0.0941,0.1513,0.1886,0.251,0.2764c0.0997,0.0877,0.2147,0.1686,0.3422,0.2356c0.1594,0.0836,0.3384,0.1453,0.5319,0.171             c0.0645,0.0085,0.1306,0.0131,0.1981,0.0131c0.3518,0,0.6569-0.114,0.8889-0.2868c0.0331-0.0247,0.0648-0.0506,0.0948-0.0775             c0.0601-0.0539,0.114-0.1119,0.161-0.1729c0.1174-0.1524,0.1917-0.3228,0.2132-0.4913c0.0043-0.0337,0.0065-0.0673,0.0065-0.1007             C-61.2862,80.4956-61.3621,80.4198-61.4556,80.4198z"/><path d="M-63.1533,79.5132c0.0419,0.0621,0.0955,0.1157,0.1576,0.1576c0.0233,0.0157,0.0478,0.0298,0.0733,0.0421             c0.051,0.0246,0.1061,0.042,0.1641,0.0508c0.029,0.0044,0.0587,0.0067,0.0889,0.0067c0.1208,0,0.2331-0.0367,0.3262-0.0997             c0.0388-0.0262,0.0743-0.0569,0.1057-0.0915c0.0437-0.0481,0.0758-0.1055,0.1016-0.1663c0.0297-0.07,0.0499-0.1451,0.0499-0.226             c0-0.3222-0.2612-0.5835-0.5834-0.5835c-0.1611,0-0.3069,0.0653-0.4125,0.171c-0.0046,0.0046-0.008,0.0103-0.0125,0.0151             c-0.03,0.0321-0.0555,0.0679-0.0777,0.1061c-0.0311,0.0536-0.056,0.1112-0.0688,0.1738c-0.0078,0.038-0.0118,0.0773-0.0118,0.1176             s0.0041,0.0796,0.0118,0.1176C-63.2255,79.3806-63.1952,79.4511-63.1533,79.5132z"/><path d="M-67.4734,73.3949c-0.1194-0.1469-0.2485-0.277-0.3856-0.3879s-0.2822-0.2028-0.4336-0.2729s-0.3093-0.1188-0.4719-0.1434             c-0.0813-0.0123-0.1638-0.0186-0.2473-0.0186c-1.3356,0-2.4183,1.6135-2.4183,3.6039s1.0827,3.3781,2.4183,3.3781             c0.0835,0,0.166-0.0054,0.2473-0.0161c0.1626-0.0213,0.3204-0.0635,0.4719-0.1251c0.1514-0.0616,0.2965-0.1425,0.4336-0.2414             c0.137-0.0988,0.2661-0.2155,0.3856-0.3485c0.1194-0.133,0.2292-0.2823,0.3278-0.4464c0.345-0.5743,0.5522-1.3298,0.5522-2.2006             s-0.2072-1.6695-0.5522-2.2925C-67.2441,73.7054-67.354,73.5418-67.4734,73.3949z"/><path d="M-55.9415,72.5719c-1.3356,0-2.4183,1.6135-2.4183,3.6039s1.0826,3.3781,2.4183,3.3781s2.4183-1.3877,2.4183-3.3781             S-54.6058,72.5719-55.9415,72.5719z"/></g></symbol><symbol id="icon-stack" viewBox="-91 49.217 56.693 56.693" enable-background="new -91 49.217 56.693 56.693" xml:space="preserve"><g><rect x="-71.7079" y="71.981" transform="matrix(0.8613 0.508 -0.508 0.8613 29.0038 41.8064)" width="19.2464" height="4.1104"/><rect x="-74.6274" y="79.2883" transform="matrix(0.9657 0.2596 -0.2596 0.9657 18.8887 19.6645)" width="19.2462" height="4.1107"/><rect x="-75.8359" y="86.3297" transform="matrix(0.9958 0.0917 -0.0917 0.9958 7.83 6.4478)" width="19.246" height="4.111"/><rect x="-76.1525" y="92.4966" width="19.2466" height="4.111"/><path d="M-53.6363,99.8858h-25.2446v-16.805h-3.2878v20.0301h0.0327c0,0.0156,0.9598,0.0156,0.9598,0.0156h30.7952v-0.0156    c0.0324,0,0.0324-0.9601,0.0324-0.9601V83.0808h-3.2877V99.8858z"/><rect x="-65.4299" y="65.428" transform="matrix(-0.5634 -0.8262 0.8262 -0.5634 -143.0016 59.4012)" width="19.247" height="4.1099"/><rect x="-49.6262" y="54.5705" transform="matrix(0.9853 -0.171 0.171 0.9853 -11.6767 -7.1886)" width="4.1108" height="19.2461"/></g></symbol><symbol id="icon-linkedin" viewBox="0 0 56.693 56.693" enable-background="new 0 0 56.693 56.693" xml:space="preserve"><g><path d="M30.071,27.101v-0.077c-0.016,0.026-0.033,0.052-0.05,0.077H30.071z"/><path d="M49.265,4.667H7.145c-2.016,0-3.651,1.596-3.651,3.563v42.613c0,1.966,1.635,3.562,3.651,3.562h42.12             c2.019,0,3.654-1.597,3.654-3.562V8.23C52.919,6.262,51.283,4.667,49.265,4.667z M18.475,46.304h-7.465V23.845h7.465V46.304z              M14.743,20.777h-0.05c-2.504,0-4.124-1.725-4.124-3.88c0-2.203,1.67-3.88,4.223-3.88c2.554,0,4.125,1.677,4.175,3.88             C18.967,19.052,17.345,20.777,14.743,20.777z M45.394,46.304h-7.465V34.286c0-3.018-1.08-5.078-3.781-5.078             c-2.062,0-3.29,1.389-3.831,2.731c-0.197,0.479-0.245,1.149-0.245,1.821v12.543h-7.465c0,0,0.098-20.354,0-22.459h7.465v3.179             c0.992-1.53,2.766-3.709,6.729-3.709c4.911,0,8.594,3.211,8.594,10.11V46.304z"/></g></symbol><symbol id="icon-whatsapp" viewBox="0 0 56.693 56.693" xml:space="preserve"><g><path class="st0" d="M46.3802,10.7138c-4.6512-4.6565-10.8365-7.222-17.4266-7.2247c-13.5785,0-24.63,11.0506-24.6353,24.6333             c-0.0019,4.342,1.1325,8.58,3.2884,12.3159l-3.495,12.7657l13.0595-3.4257c3.5982,1.9626,7.6495,2.9971,11.7726,2.9985h0.01             c0.0008,0-0.0006,0,0.0002,0c13.5771,0,24.6293-11.0517,24.635-24.6347C53.5914,21.5595,51.0313,15.3701,46.3802,10.7138z              M28.9537,48.6163h-0.0083c-3.674-0.0014-7.2777-0.9886-10.4215-2.8541l-0.7476-0.4437l-7.7497,2.0328l2.0686-7.5558             l-0.4869-0.7748c-2.0496-3.26-3.1321-7.028-3.1305-10.8969c0.0044-11.2894,9.19-20.474,20.4842-20.474             c5.469,0.0017,10.6101,2.1344,14.476,6.0047c3.8658,3.8703,5.9936,9.0148,5.9914,14.4859             C49.4248,39.4307,40.2395,48.6163,28.9537,48.6163z"/><path class="st0" d="M40.1851,33.281c-0.6155-0.3081-3.6419-1.797-4.2061-2.0026c-0.5642-0.2054-0.9746-0.3081-1.3849,0.3081             c-0.4103,0.6161-1.59,2.0027-1.9491,2.4136c-0.359,0.4106-0.7182,0.4623-1.3336,0.1539c-0.6155-0.3081-2.5989-0.958-4.95-3.0551             c-1.83-1.6323-3.0653-3.6479-3.4245-4.2643c-0.359-0.6161-0.0382-0.9492,0.27-1.2562c0.2769-0.2759,0.6156-0.7189,0.9234-1.0784             c0.3077-0.3593,0.4103-0.6163,0.6155-1.0268c0.2052-0.4109,0.1027-0.7704-0.0513-1.0784             c-0.1539-0.3081-1.3849-3.3379-1.8978-4.5706c-0.4998-1.2001-1.0072-1.0375-1.3851-1.0566             c-0.3585-0.0179-0.7694-0.0216-1.1797-0.0216s-1.0773,0.1541-1.6414,0.7702c-0.5642,0.6163-2.1545,2.1056-2.1545,5.1351             c0,3.0299,2.2057,5.9569,2.5135,6.3676c0.3077,0.411,4.3405,6.6282,10.5153,9.2945c1.4686,0.6343,2.6152,1.013,3.5091,1.2966             c1.4746,0.4686,2.8165,0.4024,3.8771,0.2439c1.1827-0.1767,3.6419-1.489,4.1548-2.9267c0.513-1.438,0.513-2.6706,0.359-2.9272             C41.211,33.7433,40.8006,33.5892,40.1851,33.281z"/></g></symbol><symbol id="icon-inbox" viewBox="0 0 56.7 56.7" xml:space="preserve"><g><path d="M23.0224,17.7972c-0.1953-0.1953-0.5117-0.1953-0.707,0l-3.0322,3.0317c-0.0938,0.0938-0.1465,0.2207-0.1465,0.3535             s0.0527,0.2598,0.1465,0.3535l8.8838,8.8833c0.0977,0.0977,0.2256,0.1465,0.3535,0.1465s0.2559-0.0488,0.3535-0.1465             l17.7549-17.7549c0.1953-0.1953,0.1953-0.5117,0-0.707l-3.0317-3.0322c-0.0938-0.0938-0.2207-0.1465-0.3535-0.1465             S42.9838,8.8314,42.89,8.9251L28.5204,23.2952L23.0224,17.7972z"/><path d="M53.0978,23.701c-0.0001-0.0004-0.0005-0.0007-0.0007-0.0011c-0.2549-0.7663-0.7205-1.4108-1.348-1.8636l-7.4805-5.3976             l-1.4325,1.4325l7.6515,5.5209l0.0911,0.0657c0.0811,0.0586,0.1426,0.1412,0.2119,0.2148c0.0166,0.0176,0.035,0.033,0.0508,0.0515             c0.0707,0.2159-0.0034,0.4578-0.2056,0.5809L5.6591,51.6898c0.4562,0.1978,0.9576,0.31,1.4856,0.31h42.4102             c2.0679,0,3.7505-1.6821,3.7505-3.75V24.8773C53.3053,24.5067,53.2374,24.1219,53.0978,23.701z"/><path d="M5.9092,23.6724c0.069-0.0732,0.1304-0.1557,0.2111-0.2141L27.3253,8.1575c0.6133-0.4424,1.4355-0.4424,2.0488,0             l7.4755,5.394l1.4325-1.4326l-7.738-5.5835c-1.3125-0.9473-3.0762-0.9473-4.3887,0L4.9499,21.8367             c-0.6257,0.452-1.0917,1.0956-1.3472,1.8622c-0.0002,0.0005-0.0007,0.001-0.0009,0.0015c-0.1392,0.4199-0.207,0.8047-0.207,1.1768             v23.3726c0,1.1402,0.5223,2.1506,1.3278,2.8389L27.83,37.0193L5.9092,23.6724z"/></g></symbol><symbol id="icon-telegram" viewBox="0 0 300 300" xml:space="preserve"><g id="XMLID_496_"><path d="M5.299,144.645l69.126,25.8l26.756,86.047c1.712,5.511,8.451,7.548,12.924,3.891l38.532-31.412
                 c4.039-3.291,9.792-3.455,14.013-0.391l69.498,50.457c4.785,3.478,11.564,0.856,12.764-4.926L299.823,29.22
                 c1.31-6.316-4.896-11.585-10.91-9.259L5.218,129.402C-1.783,132.102-1.722,142.014,5.299,144.645z M96.869,156.711l135.098-83.207
                 c2.428-1.491,4.926,1.792,2.841,3.726L123.313,180.87c-3.919,3.648-6.447,8.53-7.163,13.829l-3.798,28.146
                 c-0.503,3.758-5.782,4.131-6.819,0.494l-14.607-51.325C89.253,166.16,91.691,159.907,96.869,156.711z"/></g></symbol><symbol id="flag-es" viewBox="0 0 640 480" xml:space="preserve"><rect width="750" height="500" fill="#c60b1e"/><rect width="750" height="250" fill="#ffc400" y="125"/></symbol><symbol id="flag-en" viewBox="0 0 640 480"><defs><clipPath id="a"><path fill-opacity=".67" d="M-85.333 0h682.67v512h-682.67z"/></clipPath></defs><g clip-path="url(#a)" transform="translate(80) scale(.94)"><g stroke-width="1pt"><path fill="#006" d="M-256 0H768.02v512.01H-256z"/><path d="M-256 0v57.244l909.535 454.768H768.02V454.77L-141.515 0H-256zM768.02 0v57.243L-141.515 512.01H-256v-57.243L653.535 0H768.02z" fill="#fff"/><path d="M170.675 0v512.01h170.67V0h-170.67zM-256 170.67v170.67H768.02V170.67H-256z" fill="#fff"/><path d="M-256 204.804v102.402H768.02V204.804H-256zM204.81 0v512.01h102.4V0h-102.4zM-256 512.01L85.34 341.34h76.324l-341.34 170.67H-256zM-256 0L85.34 170.67H9.016L-256 38.164V0zm606.356 170.67L691.696 0h76.324L426.68 170.67h-76.324zM768.02 512.01L426.68 341.34h76.324L768.02 473.848v38.162z" fill="#c00"/></g></g></symbol></defs></svg><div class="w3-sidebar w3-bar-block w3-collapse w3-card w3-animate-right" id="mySidebar"><button class="w3-button w3-bar-item w3-hide-large" onclick="w3_close()">&times;</button><nav id="navigation"><h2>Menú</h2><ul><li><a href="https://elbauldelprogramador.com/categories/">Categorías</a></li><li><a href="https://elbauldelprogramador.com/tags/">Tags</a></li><li><a href="https://elbauldelprogramador.com/cursos/">Cursos</a></li><li><a href="https://elbauldelprogramador.com/manuales-gratuitos/">Manuales</a></li><li><a href="https://elbauldelprogramador.com/categories/security-now/">Security Now!</a></li><li><a href="https://elbauldelprogramador.com/libros-recomendados/">Libros</a></li><li><a href="https://elbauldelprogramador.com/apoyanos/">Apoyanos</a></li><li><a href="https://elbauldelprogramador.com/contacto/">Contacto</a></li></ul></nav></div><a id="search" class="dosearch" href="https://elbauldelprogramador.com/buscar"><svg class="icon-search"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-search"></use></svg> </a><a id="slide" class="slideButton fade"><svg onclick="w3_open()" id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg></a><header class="header-post" role="banner"><div class="content"><time datetime="2017-09-24T19:21:18&#43;0100" class="date">Actualizado el Sep 24, 2017</time><h1 class="post-title">Buenas prácticas para el Diseño de una API RESTful Pragmática</h1><p class="subtitle">Esta es una traducción lo más literal posible del artículo original, ya que quería preservar la opinión personal del autor así como también el destacable trabajo de investigación y análisis que realizó.</p><p>Tiempo aprox ~ 28 m. (5904 palabras.)</p></div></header><section class="post"><article role="article" id="post" class="post-content"><section class="author"><div class="details"><div id="author-photo"><img layout="responsive" width="150px" height="150px" class="img-rounded" src="/img/author_lu.jpg"></div><div><p class="def">Autor</p><h3 class="name"><a title="Ver todos los artículos de Lucila Armentano" id="author-name" href="https://elbauldelprogramador.com/author/luzila/">Lucila Armentano</a></h3><p class="desc">Analista y desarrolladora de Sistemas. Rosario, Santa Fe, Argentina.</p><p class="desc"><a href="https://elbauldelprogramador.com/author/luzila/">Más artículos de Lucila Armentano</a></p><div class="share"><a href="mailto:armentanolucila@gmail.com"><svg class="social icon-mail"><use xlink:href="#icon-inbox"></use></svg></a><a href="http://twitter.com/Luzcila" target="_blank"><svg class="social icon-twitter"><use xlink:href="#icon-twitter"></use></svg></a><a href="http://plus.google.com/+LucilaArmentano" target="_blank"><svg class="social icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg></a><a href="https://www.linkedin.com/in/armentanolucila" target="_blank"><svg class="social icon-linkedin"><use xlink:href="#icon-linkedin"></use></svg></a><a href="https://telegram.me/elbaulp" target="_blank"><svg class="social icon-telegram"><use xlink:href="#icon-telegram"></use></svg></a></div></div></div></section><div id="toc"><h1>Índice</h1><nav id="TableOfContents"><ul><li><a href="#tl-dr">TL,DR</a></li><li><a href="#1-requisitos-fundamentales-para-la-api">1. Requisitos fundamentales para la API</a></li><li><a href="#2-usa-acciones-y-urls-restful">2. Usa acciones y URLs RESTful</a></li><li><a href="#3-ssl-en-todos-lados-todo-el-tiempo">3. SSL en todos lados – todo el tiempo</a></li><li><a href="#4-documentación">4. Documentación</a></li><li><a href="#5-versionado">5. Versionado</a></li><li><a href="#6-filtrado-ordenación-y-búsqueda-en-los-resultados">6. Filtrado, ordenación y búsqueda en los resultados</a><ul><li><a href="#filtrado"><strong>Filtrado:</strong></a></li><li><a href="#ordenación"><strong>Ordenación:</strong></a></li><li><a href="#búsqueda"><strong>Búsqueda:</strong></a></li><li><a href="#alias-para-las-consultas-comunes"><strong>Alias para las consultas comunes</strong></a></li></ul></li><li><a href="#7-limitando-los-campos-que-son-devueltos-por-la-api">7. Limitando los campos que son devueltos por la API</a></li><li><a href="#8-update-creation-deberían-devolver-una-representación-de-un-recurso">8. Update &amp; Creation deberían devolver una representación de un recurso</a></li><li><a href="#9-deberías-hateoas">9. ¿Deberías HATEOAS?</a></li><li><a href="#10-sólo-respuestas-json">10. Sólo respuestas JSON</a></li><li><a href="#11-snake-case-vs-camelcase-para-el-nombre-de-los-campos">11. snake_case vs camelCase para el nombre de los campos</a></li><li><a href="#12-pretty-print-por-default-y-asegura-que-gzip-sea-soportado">12. Pretty print por default y asegura que gzip sea soportado</a></li><li><a href="#13-no-uses-un-envoltorio-por-default-pero-posibilitalo-cuando-sea-necesario">13. No uses un envoltorio por default, pero posibilitalo cuando sea necesario</a></li><li><a href="#14-cuerpos-html-post-put-patch-codificados-en-json">14. Cuerpos HTML POST, PUT &amp; PATCH codificados en JSON</a></li><li><a href="#15-paginación">15. Paginación</a></li><li><a href="#16-representaciones-de-recursos-relacionados-a-los-datos-solicitados-mediante-carga-automática"><strong>16. Representaciones de recursos relacionados a los datos solicitados mediante carga automática</strong></a></li><li><a href="#17-sobreescribiendo-el-método-http">17. Sobreescribiendo el método HTTP</a></li><li><a href="#18-limitación-de-tráfico-por-ratio-rate-limiting">18. Limitación de tráfico por ratio (Rate limiting)</a></li><li><a href="#19-autenticación">19. Autenticación</a></li><li><a href="#20-cacheo">20. Cacheo</a></li><li><a href="#21-errores">21. Errores</a></li><li><a href="#22-códigos-de-estado-http">22. Códigos de estado HTTP</a></li><li><a href="#en-conclusión">En conclusión</a></li><li><a href="#referencias">Referencias</a></li></ul></nav></div><blockquote><p>Esta es una traducción lo más literal posible del artículo original, ya que quería preservar la opinión personal del autor así como también el destacable trabajo de investigación y análisis que realizó.</p></blockquote><p>Tu modelo de datos ha empezado a estabilizarse y es el momento de crear una API pública para tu aplicación web. Te das cuenta de que es difícil hacer cambios significativos a tu API una vez que fue liberada, quieres lo mejor y lo antes posible. Ahora, en internet no escasean opiniones sobre diseño de APIs. Pero, debido a que no hay un standard adoptado popularmente que funcione en todos los casos, te quedas con un manojo de opciones: ¿Qué formatos deberías aceptar? ¿Cómo deberías autenticar? ¿Debería tu API ser versionada?</p><p></p><hr><div class="support-us"><p><strong>¿Te gusta el blog? Ayúdame a seguir escribiendo</strong></p><ul><li><a href="https://elbauldelprogramador.com/why-am-i-removing-google-analytics/">Por qué renuncio a <strong>Google Analytics</strong></a></li><li><a href="https://www.amazon.es/?&amp;tag=bmab-21&amp;camp=4586&amp;creative=670922&amp;linkCode=ur1&amp;adid=01FEFB5JJ9GNJJX2T2CR&amp;">Usa mi enlace de <strong>Ámazon</strong></a></li><li><a href="https://elbauldelprogramador.com/manuales-gratuitos/">Descarga una <strong>guía gratuita</strong></a></li><li><a href="https://elbauldelprogramador.com/apoyanos/">Más formas de <strong>apoyarme</strong></a></li></ul></div><hr><p></p><p>Diseñando una API para <a href="http://www.supportfu.com/">SupportFu</a> (una alternativa para <a href="http://www.supportfu.com/zendesk-alternative">Zendesk</a>), intenté encontrar respuestas pragmáticas a estas preguntas. Mi objetivo para la <a href="http://dev.supportfu.com/api/v1">API de SupportFu</a> es que sea fácil de usar, facil de adoptar y lo suficientemente flexible para implementarla en nuestras propias interfaces de usuario.</p><h1 id="tl-dr">TL,DR</h1><ol><li>Usa SSL en todos lados, sin excepciones</li><li>Una API es tan buena como lo es su documentación – por lo tanto realiza una buena documentación</li><li>Versiona a través de la URL, no de los encabezados</li><li>Usa parámetros de consulta para filtros avanzados, ordenamiento y búsqueda</li><li>Provee una forma de limitar cuáles campos son devueltos desde la API</li><li>Devuelve algo útil de las peticiones POST, PATCH &amp; PUT</li><li>HATEOAS todavía no es muy práctico</li><li>Usa JSON donde sea posible, XML sólo si tienes la obligación</li><li>Deberías usar camelCase con JSON, pero snake_case es un 20% más fácil de leer</li><li>Usa Pretty Print por defecto y asegura que gzip esté soportado</li><li>No uses respuestas encapsuladas por defecto</li><li>Considera usar JSON para cuerpos de peticiones POST, PUT y PATCH</li><li>Pagina usando encabezados Link</li><li>Provee una forma de cargar automáticamente representaciones de datos relacionados al recurso solicitado</li><li>Provee una forma de sobreescribir el método HTTP</li><li>Provee encabezados de respuesta útiles para controles de tráfico (rate limiting)</li><li>Usa autenticación basada en tokens, transportado en OAuth2 donde se necesite delegación</li><li>Incluir encabezados de respuesta que faciliten el caché</li><li>Define un error de carga útil (payload) que sea consumible</li><li>Utilizar efectivamente los códigos de error HTTP</li></ol><h1 id="1-requisitos-fundamentales-para-la-api">1. Requisitos fundamentales para la API</h1><p>Muchas de las opiniones sobre diseño de API que aparecen en la web son discusiones académicas en torno a interpretaciones subjetivas de las normas difusas en lugar de lo que tiene sentido en el mundo real. Mi objetivo con este artículo es describir las mejores prácticas para una API pragmática diseñada para aplicaciones web de hoy en día. No hago ningún intento de satisfacer un standard si no parece viable. Para ayudar a guiar el proceso de toma de decisiones, he escrito algunos de los requisitos que la API debe cubrir:</p><ul><li>Debería utilizar estándares web donde tengan sentido</li><li>Debería ser amigable para el desarrollador y ser explorable mediante una barra de direcciones del navegador</li><li>Debería ser sencilla, intuitiva y consistente para que la adopción no sólo sea fácil, sino también agradable</li><li>Debería proporcionar suficiente flexibilidad para potenciar mayoritariamente la UI <a href="http://www.supportfu.com/">SupportFu</a></li><li>Debería ser eficiente, manteniendo el equilibrio con los demás requisitos</li></ul><p>Una API es una interfaz de usuario (UI) para un desarrollador – al igual que cualquier UI, es importante asegurar que la experiencia del usuario esté pensada cuidadosamente!</p><h1 id="2-usa-acciones-y-urls-restful">2. Usa acciones y URLs RESTful</h1><p>Si hay una cosa que ha ganado amplia adopción, son los principios REST. Estos fueron presentados por primera vez por <a href="http://roy.gbiv.com/">Roy Felding</a> en el <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">Capítulo 5</a> de su disertación sobre <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">arquitecturas de software ubicadas en redes de trabajo</a>.</p><p>Los fundamentales principios de <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> se basan en separar tu API en recursos lógicos. Estos recursos son manipulados usando peticiones HTTP donde el método (GET, POST, PUT, PATCH, DELETE) tienen un significado específico.</p><p><strong>¿Pero qué puede hacer un recurso?</strong> Bueno, estos deberían ser <a href="https://blog.apigee.com/detail/restful_api_design_nouns_are_good_verbs_are_bad">sustantivos (¡no verbos!)</a> que tengan sentido desde una perspectiva del consumidor de la API. Aunque tus modelos internos pueden mapear cuidadosamente con los recursos, no es necesario que sea un mapeo uno-a-uno. La clave es no filtrarse ningún detalle irrelevante de implementación. Por ejemplo, algunos de los sustantivos de SupportFu podrían ser <em>ticket</em>, <em>usuario</em> y <em>grupo</em>.</p><p>Una vez que tienes tus recursos definidos, necesitas identificar qué acciones aplican a ellos y cómo deberían relacionarse con tu API. Los principios REST proveen estrategias para manejar acciones <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> usando métodos HTTP relacionados de la siguiente forma:</p><ul><li><em>GET /tickets</em>- Devuelve una lista de tickets</li><li><em>GET /tickets/12</em>- Devuelve un ticket específico</li><li><em>POST /tickets</em>- Crea un nuevo ticket</li><li><em>PUT /tickets/12</em>- Actualiza el ticket #12</li><li><em>PATCH /tickets/12</em>- Actualiza parcialmente el ticket #12</li><li><em>DELETE /tickets/12</em>- Elimina el ticket #12</li></ul><p>La grandeza de REST es que estas impulsando métodos HTTP existentes a implementar funcionalidades importantes en sólo un simple endpoint <em>/tickets</em>. No hay convención de nombres de métodos para seguir y la estructura URL es limpia y clara.</p><p><strong>¿El nombre del Endpoint debería ser singular o plural?</strong> La regla mantenlo-simple (keep-it-simple) aplica aquí. Si bien tu gramática interna te dirá que está mal describir una instancia única de un recurso utilizando el plural, la respuesta pragmática es mantener el formato de la URL consistente y siempre usar plural. No tener que lidiar con plurales irregulares (person/people, goose/geese) hace más simple la vida del consumidor de la API y es más sencillo para el proveedor de la API implementarla (como los más modernos frameworks manejarán nativamente <em>/tickets</em> y <em>/tickets/12</em> bajo un controlador comun).</p><p><strong>¿Pero cómo lidiar con las relaciones?</strong> Si una relación puede existir con un sólo recurso, los principios REST proveen una guía útil. Veamos esto con un ejemplo. Un ticket en <a href="http://www.supportfu.com/">SupportFu</a> consiste en un número de mensajes. Estos mensajes pueden ser lógicamente mapeados al endpoint /tickets de la siguiente forma:</p><ul><li><em>GET /tickets/12/messages</em> - Devuelve una lista de mensajes para el ticket #12</li><li><em>GET /tickets/12/messages/5</em> - Devuelve el mensaje #5 para el ticket #12</li><li><em>POST /tickets/12/messages</em> - Crea un nuevo mensaje en el ticket #12</li><li><em>PUT /tickets/12/messages/5</em> – Actualiza el mensaje #5 para el ticket #12</li><li><em>PATCH /tickets/12/messages/5 -</em> Actualiza parcialmente el mensaje #5 para el ticket #12</li><li><em>DELETE /tickets/12/messages/5</em> - Borra el mensaje #5 para el ticket #12</li></ul><p>Alternativamente, si una relación puede existir independientemente del recurso, tiene sentido incluir sólo un identificador en la representación de la salida del recurso. El consumidor de la API debería entonces tener que acertar al endpoint de la relación. Sin embargo, si la relación es comunmente requerida junto con el recurso, la API podría ofrecer funcionalidad para automáticamente incluir la representación de la relación y evitar el segundo impacto en la API. <strong>¿Qué ocurre con las acciones que no corresponden a las operaciones CRUD?</strong> Aquí es donde las cosas pueden confundirse. Hay un número de enfoques:</p><ol><li>Reestructura la acción para que aparezca como un campo de un recurso. Esto funciona si la acción no toma parámetros. Por ejemplo, un acción “activate” puede ser asignada a un campo booleano <em>activated</em> y actualizado vía PATCH al recurso.</li><li>Tratalo como un sub-recurso con principios REST. Por ejemplo, la API de GitHub te permite “<a href="http://developer.github.com/v3/gists/#star-a-gist">star a gist</a>“(marcar como importante) con <em>PUT /gists/:id/star</em> y “<a href="http://developer.github.com/v3/gists/#unstar-a-gist">unstar</a>” (desmarcar) con DELETE /gists/:id/star.</li><li>A veces realmente no tienes forma de mapear la acción a una estructura REST apropiada. Por ejemplo, una búsqueda multi-recurso no tiene sentido ser asignada a un endpoint de un recurso específico. En este caso, <em>/search</em> podría tener más sentido incluso si no es un sustantivo. Esto está BIEN – sólo realiza lo que sea correcto desde la perspectiva del consumidor de la API y asegúrate de que esté claramente documentado para evitar confusiones.</li></ol><h1 id="3-ssl-en-todos-lados-todo-el-tiempo">3. SSL en todos lados – todo el tiempo</h1><p>Usa siempre SSL. Sin excepciones. Hoy, tus APIs web pueden ser accedidas desde cualquier lado donde haya internet (como librerías, cafeterías, aeropuertos, entre otros). No todos son seguros. Muchos no encriptan las comunicaciones, permitiendo facilmente ser espiados o falsificados si son interceptadas las credenciales de autenticación.</p><p>Otra ventaja de usar siempre SSL es que garantiza que las comunicaciones encriptadas simplifiquen los esfuerzos de autenticación – puedes salir simplemente con los tokens de acceso en vez de tener que firmar cada petición a la API.</p><p>Hay que tener cuidado con los accesos no-SSL a las URLs de la API. <strong>NO</strong> las redirecciones a sus homólogas SSL. Es recomendable que lances un error. La última cosa que quieres para tus clientes pobremente configurados es enviar peticiones a un endpoint sin encriptar, sólo para ser redireccionados silenciosamente al verdadero endpoint encriptado.</p><h1 id="4-documentación">4. Documentación</h1><p>Una API es buena tanto como lo sea su documentación. Los docs deberían ser fáciles de encontrar y de acceso público. Muchos desarrolladores revisarán la documentación antes de realizar cualquier esfuerzo para integrarla. Cuando los docs están escondidos dentro de un archivo PDF o están permitido sólo para usuarios identificados, no son entonces sólo difíciles de encontrar sino que también dificultan la búsqueda.</p><p>Los documentos deberían mostrar ejemplos de ciclos completos de petición/respuesta. Preferentemente, las peticiones deberían poder ser “pegadas” – tanto los hipervínculos deberían poder ser pegados en un navegador como los ejemplos de código deberían poder ser pegados en una consola. <a href="http://developer.github.com/v3/gists/#list-gists">GitHub</a> y <a href="https://stripe.com/docs/api">Strip</a> hacen un muy buen trabajo en este aspecto.</p><p>Una vez que liberes una API pública, te comprometes a no romper cosas sin previo aviso. La documentación debe incluir información y detalles sobre futuras actualizaciones a la API que sean visibles al exterior. Las actualizaciones deben ser entregadas a través de un blog (es decir, una lista de cambios) o una lista de correo (preferiblemente ambos).</p><h1 id="5-versionado">5. Versionado</h1><p>Siempre versiona tu API. El versionado te ayuda a iterar más rápido y evitar peticiones inválidas desde endpoints actualizados. Además te ayuda a resolver cualquier transición importante de versión de la API mientras continúas ofreciendo viejas versiones de la API por un período de tiempo.</p><p>Hay opiniones cruzadas respecto si <a href="http://stackoverflow.com/questions/389169/best-practices-for-api-versioning">la versión de la API debería ser incluida en la URL o en el encabezado</a>. Académicamente hablando, debería probablemente estar en el encabezado. Sin embargo, la versión necesita estar en la URL para asegurar la posibilidad de explorar en el navegador los recursos a través de las versiones (recuerda los requerimientos de la API especificados al inicio del artículo).</p><p>Soy un gran fanático del <a href="https://stripe.com/docs/api#versioning">alcance que Stripe ha tomado respecto al versionado de la API</a> - la URL tiene un número de versión principal (v1), pero la API tiene las sub-versiones basadas en fechas que pueden ser elegidas mediante un encabezado de petición HTTP personalizado. En este caso, la versión principal proporciona la estabilidad estructural de la API en su conjunto, mientras que las sub-versiones representan cambios más pequeños (campos inhabilitados, cambios en el endpoint, etc).</p><p>Una API nunca va a ser completamente estable. El cambio es inevitable. Lo importante es cómo se gestiona el cambio. Anuncios de fechas y planificaciones bien documentados puede ser una buena práctica para muchas APIs. Todo se reduce a lo que es razonable teniendo en cuenta la industria y los posibles consumidores de la API.</p><h1 id="6-filtrado-ordenación-y-búsqueda-en-los-resultados">6. Filtrado, ordenación y búsqueda en los resultados</h1><p>Lo mejor es mantener la URL base de recursos tan simple como sea posible. Filtros de resultados complejos, requisitos de ordenamiento y búsqueda avanzada (cuando se limita a un solo tipo de recurso) pueden ser implementados fácilmente como parámetros de consulta en la parte superior de la URL base. Veamos esto en más detalle:</p><h2 id="filtrado"><strong>Filtrado:</strong></h2><p>Usa un único parámetro de consulta por cada campo que implemente el filtro. Por ejemplo, cuando se pide una lista de tickets del endpoint <em>/tickets</em>, podrías querer limitarla a sólo los que están en estado abierto. Esto puede ser logrado con una petición como <em>GET /tickets?state=open</em>. En este caso, state es el parámetro de la consulta que implementa el filtro.</p><h2 id="ordenación"><strong>Ordenación:</strong></h2><p>Similar al filtrado, un parámetro genérico <em>sort</em> puede ser usado para describir las reglas de ordenamiento. Organiza los requerimientos de ordenamiento complejos permitiendo que el parámetro de ordenación sea tomado de una lista de campos separados por coma, cada uno con un posible negativo unario para implicar orden descendiente. Veamos algunos ejemplos:</p><ul><li><em>GET /tickets?sort=-priority</em> – Devuelve una lista de tickets en orden de prioridad descendiente</li><li><em>GET /tickets?sort=-priority,created_at</em>- Devuelve una lista de tickets en orden de prioridad descendiente. Con una prioridad específica, los tickets más viejos son ordenados primero.</li></ul><h2 id="búsqueda"><strong>Búsqueda:</strong></h2><p>A veces los filtros básicos no son suficientes y se necesita la posibilidad de realizar una búsqueda completa sobre el texto. Tal vez ya estés usando <a href="http://www.elasticsearch.org/">ElasticSearch</a> u otra búsqueda basada en la tecnología <a href="http://lucene.apache.org/">Lucene</a>. Cuando una búsqueda completa sobre el texto es usada como un mecanismo de devolución de instancias de recurso para un tipo de recurso específico, puede ser expuesto en la API como un parámetro de consulta al endpoint del recurso. Digamos <em>q</em>. Las consultas de búsqueda deberían ser pasadas directamente al motor de búsqueda y la salida de la API deberían estar en el mismo formato que un lista de resultado normal.</p><p>Combinando todo esto, podemos construir consultas como:</p><ul><li><em>GET /tickets?sort=-updated_at</em> – Devuelve los tickets recientemente actualizados</li><li><em>GET /tickets?state=closed&sort;=-updated_at</em> &ndash; Devuelve los tickets recientemente cerrados</li><li><em>GET /tickets?q=return&state;=open&sort;=-priority,created_at</em> – Devuelve el ticket abierto de mayor prioridad que menciona la palabra ‘return’</li></ul><h2 id="alias-para-las-consultas-comunes"><strong>Alias para las consultas comunes</strong></h2><p>Para hacer que la experiencia con la API sea más agradable para el consumidor promedio, considera empaquetar sets de condiciones dentro de una ruta REST facilmente accesible. Por ejemplo, la consulta de tickets cerrados recientemente puede ser empaquetada como _GET /tickets/recently<em>closed.</em></p><h1 id="7-limitando-los-campos-que-son-devueltos-por-la-api">7. Limitando los campos que son devueltos por la API</h1><p>El consumidor de la API no siempre necesita la representación completa de un recurso. La habilidad de seleccionar y elegir los campos devueltos permite el doble beneficio de dejar que el consumidor de la API minimice el tráfico de red y acelere su propio uso de la API.</p><p>Usa el parámetro de consulta <em>fields</em> que tome una lista de campos separados con coma. Por ejemplo, la siguiente petición debería traer sólo la información suficiente para mostrar una lista ordenada de tickets abiertos:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">GET /tickets?fields<span class="o">=</span>id,subject,customer_name,updated_at<span class="p">&amp;</span>state<span class="p">;</span><span class="o">=</span>open<span class="p">&amp;</span>sort<span class="p">;</span><span class="o">=</span>-updated_at</code></pre></div><h1 id="8-update-creation-deberían-devolver-una-representación-de-un-recurso">8. Update &amp; Creation deberían devolver una representación de un recurso</h1><p>Una llamada PUT, POST o PATCH puede hacer modificaciones a los campos del recurso subyacente que no fueron parte de los parámetros provistos (por ejemplo: los campos timestamp created_at o updated_at ). Para evitarle al consumidor de la API tener que consultar nuevamente a la API por un recurso actualizado, agrega el retorno de la actualización (o creación) como parte de la respuesta.</p><p>En el caso de un POST que sea un resultado de una creación, usa el <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5">código de status HTTP 201</a> e incluye un encabezado <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30">Location</a> que apunte a la URL del nuevo recurso.</p><h1 id="9-deberías-hateoas">9. ¿Deberías HATEOAS?</h1><p>Hay muchas opiniones variadas sobre si el consumidor de la API debería crear hipervínculos o si los hipervínculos deberían ser provistos por la API. Los principios de diseño RESTful especifican <a href="https://blog.apigee.com/detail/hateoas_101_introduction_to_a_rest_api_style_video_slides">HATEOAS</a>, el cual aproximadamente declara que esa interacción con un <em>endpoit</em> debería definirse en la metadata que viene con la respuesta, y no basada en información que va por fuera de la banda (<em>out-of-band</em>).</p><p>A pesar de que la web generalmente trabaja con los principios HATEOAS (ej, cuando vamos a una portada y seguimos hipervínculos basados en lo que vemos en la página), no creo que estemos listos para HATEOAS en la API todavía. Cuando navegamos en un sitio, las decisiones sobre qué hipervínculos van a ser clickeados se hacen durante la ejecución. Sin embargo, con una API, las decisiones como qué peticiones van a ser enviadas son tomadas cuando el código de integración de la API es escrito, no en tiempo de ejecución. ¿Podrían las decisiones ser aplazadas al tiempo de ejecución? Seguro, de todas maneras, no hay mucho que ganar bajando esa ruta al código ya que el código no estaría disponible para manejar cambios significantes en la API sin romperse. Esto significa que HATEOAS es prometedor pero no está listo para ser protagonista todavía. Algún esfuerzo más tiene que ser realizado para definir los estándars y herramientas al rededor de estos principios para que su potencial sea completamente aprovechado.</p><p>Por ahora es mejor asumir que el usuario tiene acceso a la documentación e incluir los identificadores de recursos en la respuesta, la cual el consumidor de la API usará cuando crea hipervínculos. Hay un par de ventajas en utilizar los identificadores – los datos que viajan sobre la red son minimizados y los datos almacenados por los consumidores de la API también son minimizados (ya que son guardados los identificadores cortos, en vez de las URLs que contienen los identificadores).</p><p>Además, dado que este post es partidario de incluir los números de versión en la URL, tiene más sentido a largo plazo para el consumidor de la API almacenar los identificadores y no las URLs. Después de todo, el identificador es estable versión por versión pero la URL que representa no lo es!</p><h1 id="10-sólo-respuestas-json">10. Sólo respuestas JSON</h1><p>Es tiempo de dejar XML atras en las APIs. Es verborrágico, es difícil de parsear, dificil de leer, su modelo de datos es incompatible con la mayoría de los modelos de datos de los lenguajes de programación y sus ventajas son irrelevantes cuando tus necesidades primarias de respuesta son serializaciones de una representación de datos interna.</p><p>No voy a poner mucho esfuerzo en explicar las razones de lo dicho arriba si se puede ver cómo otros (<a href="http://apiblog.youtube.com/2012/12/the-simpler-yet-more-powerful-new.html">Youtube</a>, <a href="https://dev.twitter.com/docs/api/1.1/overview#JSON_support_only">Twitter</a> &amp; <a href="http://developers.blog.box.com/2012/12/14/v2_api/">Box</a>) ya han comenzado el éxodo XML.</p><p>Simplemente te dejaré que veas las gráficas de Google Trends (<a href="http://www.google.com/trends/explore?q=xml+api#q=xml%20api%2C%20json%20api&amp;cmpt=q">XML API vs JSON API</a>) para que medites:</p><figure><img sizes="(min-width: 817px) 817px, 100vw" on="tap:lightbox1" role="button" tabindex="0" layout="responsive" src="/img/2014/01/201305-xml-vs-json-api.png" title="Buenas prácticas para el Diseño de una API RESTful Pragmática" alt="Buenas prácticas para el Diseño de una API RESTful Pragmática" width="817px" height="237px"></figure><p>No obstante, si tu base de clientes consiste en un gran número de clientes empresariales, puedes tener que dar soporte XML de todas maneras. Si debes hacerlo, te surgirá una nueva pregunta:</p><p><strong>¿Debería cambiar el tipo del contenido basado en encabezados Accept o basado en la URL?</strong></p><p>Para garantizar la explorabilidad del navegador, debería basarse en la URL. La opción más razonable debería ser agregar una extensión <em>.xml</em> o <em>.json</em> al endpoint de la URL .</p><h1 id="11-snake-case-vs-camelcase-para-el-nombre-de-los-campos">11. snake_case vs camelCase para el nombre de los campos</h1><p>Si estás usando JSON (JavaScript Object Notation) como tu principal formato de representación, la forma “correcta” de hacer las cosas es seguir la convención de nombres de JavaScript – y esto sinifica camelCase para el nombre de los campos! Si entonces optas por el camino de construir librerias cliente en varios lenguajes, lo mejor es usar la convención de nombres correspondiente al idioma – camelCase para C# y Java, snake_case para python y ruby.</p><p>Para pensar: Siempre sentí que <a href="http://en.wikipedia.org/wiki/Snake_case">snake_case</a> es más fácil para leer que la convención <a href="http://en.wikipedia.org/wiki/CamelCase">camelCase</a> de JavaScript. Pero no tenía ninguna evidencia para respaldar esta “sensación”, hasta ahora. Basado en un <a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&amp;arnumber=5521745">estudio visual sobre camelCase y snake_case</a> (<a href="http://www.cs.kent.edu/~jmaletic/papers/ICPC2010-CamelCaseUnderScoreClouds.pdf">PDF</a>) del 2010, <strong>snake_case es un 20% más facil de leer que camelCase</strong>! Este impacto en legibilidad puede afectar la explorabilidad de la API y los ejemplos de la documentación.</p><p>Muchas JSON APIs populares usan snake_case. Sospecho que esto se debe a la serialización de librerías que siguen las convenciones de nombres de los lenguajes subyacentes que utilizan. Tal vez necesitamos tener librerías de serialización JSON que manejen las transformaciones de convenciones de nombres.</p><h1 id="12-pretty-print-por-default-y-asegura-que-gzip-sea-soportado">12. Pretty print por default y asegura que gzip sea soportado</h1><p>Una API que provee salida con compresión de espacios en blanco no es muy divertida de ver desde un navegador. Aunque algún tipo de parámetro de consulta (como <em>?pretty=true</em>) puede ser provisto para activar pretty printing, una API que utiliza pretty print por default es mucho más accesible. El costo de transferencia de datos extra es insignificante, especialmente cuando lo comparas con el costo de no implementar gzip.</p><p>Considera algunos casos de uso: ¿Qué pasa si un consumidor de la API está debuggeando y en su código imprime los datos recibidos de la API? – Serán legibles por default. O si el consumidor graba en la URL el código que fue generando y lo interpreta directamente desde el navegador – Será legible por default. Éstos son pequeños detalles. Pequeños detalles que hacen a una API agradable de usar!</p><p><strong>Pero, ¿qué pasa con toda la transferencia extra de datos?</strong></p><p>Veamos esto con un ejemplo del mundo real. He bajado un poco de datos de la <a href="https://api.github.com/users/veesahni">API de GitHub</a>, la cual usa pretty print por default. También estuve haciendo algunas comparaciones con gzip:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl https://api.github.com/users/veesahni &gt; with-whitespace.txt
$ ruby -r json -e <span class="s1">&#39;puts JSON JSON.parse(STDIN.read)&#39;</span> &lt; with-whitespace.txt &gt; without-whitespace.txt
$ gzip -c with-whitespace.txt &gt; with-whitespace.txt.gz
$ gzip -c without-whitespace.txt &gt; without-whitespace.txt.gz</code></pre></div><p>Los archivos de salida tienen los siguientes tamaños:</p><ul><li><em>without-whitespace.txt</em> – 1252 bytes</li><li><em>with-whitespace.txt</em> – 1369 bytes</li><li><em>without-whitespace.txt.gz</em> – 496 bytes</li><li><em>with-whitespace.txt.gz</em> – 509 bytes</li></ul><p>En este ejemplo, el caracter en blanco incrementó el tamaño de la salida en un 8.5% cuando gzip no entró en juego y un 2.6% cuando utilizamos gzip. Por otro lado, el acto de comprimir con <strong>gzip en sí mismo provee un 60% de ahorro de ancho de banda</strong>. Debido a que el costo del pretty print es relativamente pequeño, es mejor utilizar pretty print por default y asegurar que la compresión con gzip esté soportada.</p><p>Para enfatizar este punto, Twitter descubrió que hay un <a href="https://dev.twitter.com/blog/announcing-gzip-compression-streaming-apis">80% de ahorro (en algunos casos)</a> cuando habilita la compresión gzip en su API Streaming. Stack Exchange fue más lejos, nunca devuelve una respuesta que no esté comprimida!</p><h1 id="13-no-uses-un-envoltorio-por-default-pero-posibilitalo-cuando-sea-necesario">13. No uses un envoltorio por default, pero posibilitalo cuando sea necesario</h1><p>Muchas APIs empaquetan sus respuestas en envoltorios como este:</p><div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;data&#34;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;id&#34;</span> <span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="nt">&#34;name&#34;</span> <span class="p">:</span> <span class="s2">&#34;John&#34;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div><p>Hay un par de justificaciones para hacer esto – facilita incluir metadata adicional o información de paginación, algunos clientes REST no permiten fácil acceso a los encabezados HTTP y las peticiones <a href="http://en.wikipedia.org/wiki/JSONP">JSONP</a> no tienen acceso a sus encabezados. Sin embargo con standards que están siendo rápidamente adoptados como <a href="http://www.w3.org/TR/cors/">CORS</a> y <a href="http://tools.ietf.org/html/rfc5988#page-6">Link header from RFC5988</a>, empaquetar se está volviendo innecesario.</p><p>Podemos profundizar a futuro la API manteniéndola sin empaquetamiento por default y empaquetando sólo en casos excepcionales.</p><p><strong>¿Cómo debería usarse un envoltorio en casos excepcionales?</strong></p><p>Hay 2 situaciones donde un envoltorio es realmente necesario – si la API necesita soportar peticiones cross domain sobre JSONP o si el cliente es incapaz de trabajar con encabezados HTTP.</p><p>Las peticiones JSONP vienen con un parámetro adicional de consulta (usualmente llamado <em>callback</em> o <em>jsonp</em>) representando el nombre de la función callback. Si este parámetro está presente, la API debería cambiarse a un modo completo de empaquetamiento donde siempre responda con un código de status HTTP 200 y pase el código de status real dentro de la respuesta JSON. Cualquier encabezado HTTP adicional que debería pasar a través de la respuesta debería ser mapeado a los campos JSON, como se ve a continuación:</p><div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">callback_function</span><span class="p">({</span>
  <span class="nx">status_code</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">next_page</span><span class="o">:</span> <span class="s2">&#34;https://..&#34;</span><span class="p">,</span>
  <span class="nx">response</span><span class="o">:</span> <span class="p">{</span>
    <span class="p">...</span> <span class="nx">actual</span> <span class="nx">JSON</span> <span class="nx">response</span> <span class="nx">body</span> <span class="p">...</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div><p>De forma similar, para soportar clientes con HTTP limitado, habilita un parámetro especial de consulta ?envelope=true, el cual debería disparar un empaquetamiento full (sin la función callback JSONP).</p><h1 id="14-cuerpos-html-post-put-patch-codificados-en-json">14. Cuerpos HTML POST, PUT &amp; PATCH codificados en JSON</h1><p>Si estás siguiendo el objetivo de este artículo, entonces has adoptado JSON para todas las salidas de la API. Ahora consideremos JSON para la entrada de la API.</p><p>Muchas APIs usan URL cifradas en sus cuerpos de las peticiones de la API. El cifrado de URL es exactamente lo que suena – los cuerpos de la petición donde los pares clave-valor están cifrados usando las mismas convenciones que uno usaría para cifrar datos en los parámetros de consulta de URL. Esto es simple, ampliamente soportado y deja el trabajo hecho.</p><p>Sin embargo, el cifrado de URL tiene algunos inconvenientes que lo hacen problemático. No tiene el concepto de tipos de dato. Esto obliga a la API a interpretar cadenas de caracteres y transformarlas en tipos numéricos (por ej integer) o booleanos. Además, no tiene un concepto real de estructura jerárquica.</p><p>Aunque hay algunas convenciones que pueden construir estructuras que no siguen el par clave-valor (como agregar [] a una clave para representar un arreglo), esto no tiene comparación con la estructura nativa jerárquica de JSON.</p><p>Si la API es simple, cifrar la URL puede ser suficiente. Sin embargo, APIs complejas deberían apegarse a JSON para sus entradas a la API. De cualquier manera, elige una y se consistente en toda la API.</p><p>Una API que acepta peticiones POST, PUT y PATCH con cifrado JSON debería también requerir en el encabezado <em>Content-Type</em> seteado con <em>application/json</em> o lanzar un código de status HTTP: 415 Unsopported Media Type.</p><h1 id="15-paginación">15. Paginación</h1><p>Las APIs con preferencia “envelope” (envoltorio) típicamente incluyen los datos de paginación dentro del mismo envoltorio. Y no los culpo – hasta hace poco, no había mejores opciones. La forma correcta de incluir los detalles de paginación hoy en día es utilizando el <a href="http://tools.ietf.org/html/rfc5988#page-6">encabezado Link introducido por RFC 5988</a>.</p><p>Una API que usa el encabezado Link puede devolver un set de hipervínculos listos para que el consumidor de la API no tenga que construir los hipervínculos por su propia cuenta. Esto es especialmente importante cuando la paginación está <a href="https://developers.facebook.com/docs/reference/api/pagination/">basada en el cursor</a>. Aquí hay un ejemplo de un encabezado Link utilizado correctamente, obtenido de la documentación de <a href="http://developer.github.com/v3/#pagination">GitHub</a>:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Link: &lt;https://api.github.com/user/repos?page<span class="o">=</span><span class="m">3</span><span class="p">&amp;</span><span class="nv">per_page</span><span class="o">=</span><span class="m">100</span>&gt;<span class="p">;</span> <span class="nv">rel</span><span class="o">=</span><span class="s2">&#34;next&#34;</span>, &lt;https://api.github.com/user/repos?page<span class="o">=</span><span class="m">50</span><span class="p">&amp;</span><span class="nv">per_page</span><span class="o">=</span><span class="m">100</span>&gt;<span class="p">;</span> <span class="nv">rel</span><span class="o">=</span><span class="s2">&#34;last&#34;</span></code></pre></div><p>Pero esto no es una solución completa para muchas APIs que quieren devolver información adicional de paginación, por ejemplo el conteo del total de resultados disponibles. Una API que requiere enviar un contador puede usar un encabezado HTTP personalizado como <em>X-Total-Count</em>.</p><h1 id="16-representaciones-de-recursos-relacionados-a-los-datos-solicitados-mediante-carga-automática"><strong>16. Representaciones de recursos relacionados a los datos solicitados mediante carga automática</strong></h1><p>Hay muchos casos donde un consumidor de la API necesita cargar datos relacionados (o referenciados) con el recurso que se está solicitando. En vez de pedir que el consumidor haga una solicitud a la API reiteradas veces por esta información, sería mucho más eficiente permitir que los datos relacionados sean devueltos y cargados a través del recurso original en demanda.</p><p>De todos modos, como <a href="http://idbentley.com/blog/2013/03/14/should-restful-apis-include-relationships/">esto va contra algunos principios RESTful</a>, podemos minimizar nuestras desviaciones haciendo entonces el parámetro de consulta <em>embed</em> (o <em>expand</em>).</p><p>En este caso, <em>embed</em> podría ser una lista separada por comas de campos a ser embebidos. La notación con punto puede ser usada para referir sub-campos. Por ejemplo:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">GET /tickets/12?embed<span class="o">=</span>customer.name,assigned_user</code></pre></div><p>Esto debería devolver un ticket con detalles adicionales embebidos, como:</p><div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;id&#34;</span> <span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
  <span class="nt">&#34;subject&#34;</span> <span class="p">:</span> <span class="s2">&#34;I have a question!&#34;</span><span class="p">,</span>
  <span class="nt">&#34;summary&#34;</span> <span class="p">:</span> <span class="s2">&#34;Hi, ....&#34;</span><span class="p">,</span>
  <span class="nt">&#34;customer&#34;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;name&#34;</span> <span class="p">:</span> <span class="s2">&#34;Bob&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;assigned_user&#34;</span><span class="p">:</span> <span class="p">{</span>
   <span class="nt">&#34;id&#34;</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
   <span class="nt">&#34;name&#34;</span> <span class="p">:</span> <span class="s2">&#34;Jim&#34;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div><p>Por supuesto, la habilidad de implementar algo así realmente depende de la complejidad interna. Este tipo de embebido puede facilmente resultar en un problema de <a href="http://stackoverflow.com/questions/97197/what-is-the-n1-selects-issue">N+1 select</a>.</p><h1 id="17-sobreescribiendo-el-método-http">17. Sobreescribiendo el método HTTP</h1><p>Algunos clientes HTTP pueden trabajar solo con peticiones simples GET y POST. Para mejorar la accesibilidad a estos clientes limitados, la API necesita proveer una forma de sobreescribir el método HTTP.</p><p>Aunque no hay ningún estandard fuerte aquí, la convención popular es aceptar un encabezado de petición <em>X-HTTP-Method-Override</em> con un valor de cadena que contenga PUT, PATCH o DELETE.</p><p>Nota que sobreescribir el encabezado debería ser aceptado en peticiones POST. Las peticiones GET nunca deberían <a href="http://programmers.stackexchange.com/questions/188860/why-shouldnt-a-get-request-change-data-on-the-server">cambiar datos en el servidor</a>!</p><h1 id="18-limitación-de-tráfico-por-ratio-rate-limiting">18. Limitación de tráfico por ratio (Rate limiting)</h1><p>Para prevenir abusos, una práctica estandard es agregar algún tipo de límite de tráfico a la API. <a href="http://tools.ietf.org/html/rfc6585">RFC 6585</a> introduce el código de status HTTP <a href="http://tools.ietf.org/html/rfc6585#section-4">429 Too Many Requests</a> para controlar esto.</p><p>Sin embargo, puede ser muy útil notificar al consumidor de sus límites antes de que se encuentre con ellos. Este es un área en la que actualmente faltan los standards pero existe una cantidad de <a href="http://stackoverflow.com/questions/16022624/examples-of-http-api-rate-limiting-http-response-headers">convenciones populares usando encabezados de respuesta HTTP.</a></p><p>Minimamente, incluye los siguientes encabezados (usando las <a href="https://dev.twitter.com/docs/rate-limiting/1.1">convenciones de nombres</a> de Twitter ya que los encabezados tipicamente no tienen capitalizacion de las palabras del medio):</p><ul><li><em>X-Rate-Limit-Limit</em> – El numero de peticiones permitidas en el período actual</li><li><em>X-Rate-Limit-Remaining</em> – El número de peticiones que faltan en el período actual</li><li><em>X-Rate-Limit-Reset</em> – El número de segundos restantes en el período actual</li></ul><p><strong>¿Por qué se usa el número de segundos restantes en vez de un time stamp para X-Rate-Limit-Reset?</strong></p><p>Un timestamp contiene una cantidad de información útil pero innecesaria como la fecha y probablemente el time-zone. Un consumidor de la API realmente quiere saber cuándo puede enviar la petición nuevamente, y el número de segundos responde a esta pregunta con el mínimo procesamiento adicional al final. Además escapa a problemas relacionados con <a href="http://en.wikipedia.org/wiki/Clock_skew">desvíos de reloj</a>.</p><p>Algunas APIs usan un timestamp de UNIX (segundos desde la fecha standard 1/1/1970) para X-Rate-Limit-Reset. ¡No hagas lo mismo!</p><p><strong>¿Por qué es una mala práctica usar el timestamp UNIX para X-Rate-Limit-Reset?</strong></p><p>La <a href="http://www.w3.org/Protocols/rfc2616/rfc2616.txt">spec de HTTP</a> ya <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3">especifica</a> el uso del <a href="http://www.ietf.org/rfc/rfc1123.txt">formato de fecha RFC 1123</a> (actualmente usado en los encabezados HTTP <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18">Date</a>, <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25">If-Modified-Since</a> y <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29">Last-Modified</a>). Si fuéramos a especificar un nuevo encabezado HTTP que tome un timestamp de algún tipo, debería seguir las convenciones RFC 1123 en vez de usar timestamps UNIX.</p><h1 id="19-autenticación">19. Autenticación</h1><p>Una API RESTful debería ser stateless (sin estado). Esto significa que la petición de autenticación no debería depender de cookies o sesiones. En lugar de ello, cada petición debería venir con algún tipo de credencial de autorización.</p><p>Siempre que se use SSL, las credenciales de autenticación pueden ser simplificadas a un token de acceso generado de forma aleatoria, que es entregado en el campo de nombre de usuario de HTTP Basic Auth.</p><p>Lo grandioso de esto es que es completamente navegable con un explorador – éste simplemente abriría un popup pidiéndote que ingreses las credenciales si recibe un código de status <em>401 Unauthorized</em> desde el servidor.</p><p>De todos modos, este método de autenticación token-over-basic-auth (token sobre autenticación basica) es sólo aceptable en los casos en que sea práctico tener la posibilidad de que el usuario copie un token de una interface de administración del entorno del consumidor de la API.</p><p>En los casos donde no sea posible, <a href="http://oauth.net/2/">OAuth 2</a> debería ser usado para facilitar la transferencia del token seguro a terceros. OAuth 2 usa <a href="http://tools.ietf.org/html/rfc6750">tokens Bearer</a> y además depende de SSL para su encriptación de transporte subyacente.</p><p>Una API que necesita soporte JSONP necesitará un tercer método de autenticación, ya que las peticiones JSONP no pueden enviar credenciales HTTP Basic Auth ni Bearer tokens. En este caso, puede utilizarse un parámetro especial de consulta “access_token”. Nota: hay un problema de seguridad inherente si se usa un parametro de consulta para el token ya que la mayoría de los servidores web almacenan los parámetros de consulta en sus logs.</p><p>Para lo que nos interesa, los tres métodos de arriba son sólo formas de transportar el token a través de la frontera de la API. El verdadero token subyacente mismo podría ser idéntico.</p><h1 id="20-cacheo">20. Cacheo</h1><p>HTTP provee un framework de cacheo incluido! Todo lo que tienes que hacer es incluir algunos encabezados adicionales en la respuesta de salida y hacer una pequeña validación cuando recibes algún encabezado de petición de entrada.</p><p>Hay 2 alcances: <a href="http://en.wikipedia.org/wiki/HTTP_ETag">ETag</a> y <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29">Last-Modified</a></p><p><strong>ETag</strong>: Cuando generas una petición, incluye un encabezado HTTP ETag conteniendo un hash o checksum de la representación. Este valor debería cambiar cada vez que la salida cambia. Ahora, si una petición de entrada HTTP contiene un encabezado <em>If-None-Match</em> con un valor ETag, la API debería devolver un código de status <em>304 Not Modified</em> en lugar de la salida del recurso.</p><p><strong>Last-Modified</strong> (Último modificado): Básicamente funciona como ETag, excepto en que usa timestamps. El encabezado de respuesta <em>Last-Modified</em> contiene un timestamp en formato <a href="http://www.ietf.org/rfc/rfc1123.txt">RFC 1123</a> el cual es validado contra <em>If-Modified-Since.</em> Nótese que la especificación de HTTP ha tenido <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3">3 formatos de fecha diferentes aceptables</a> y el servidor debería estar preparado para aceptar cualquiera de ellos.</p><h1 id="21-errores">21. Errores</h1><p>Sencillamente como una página HTML de error muestra un mensaje de error útil a un visitante, una API debería proveer un mensaje de error útil en un formato conocido. La representación de un error debería no ser diferente a la representación de cualquier recurso, con su propio set de campos.</p><p>La API debería devolver siempre códigos de status HTTP prácticos. Los errores de la API generalmente caen dentro de 2 tipos: la serie 400 de códigos de status para problemas en el cliente y la serie 500 de códigos de status para problemas en el servidor. Como mínimo, la API debería estandarizar que todos los errores de la serie 400 vengan en formato de error JSON. Si es posible (por ejemplo si los balanceadores de carga y proxies reversos pueden crear cuerpos de error personalizables), este debería extender la serie de códigos de error 500.</p><p>El cuerpo de un error JSON debería proveer algunas cosas para el desarrollador – un mensaje de error útil, un código de error único (que pueda ser buscado para más detalles en la documentación) y una descripción detallada. Una representación de salida JSON de esta forma podría ser:</p><div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;code&#34;</span> <span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
  <span class="nt">&#34;message&#34;</span> <span class="p">:</span> <span class="s2">&#34;Something bad happened :(&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span> <span class="p">:</span> <span class="s2">&#34;More details about the error here&#34;</span>
<span class="p">}</span></code></pre></div><p>Los errores de validación para peticiones PUT, PATCH y POST necesitarán un breakdown en el campo. Esto se modela mejor utilizando un código de error de alto nivel arreglado para fallas de validación que proveen detalles del error en el campo adicional <em>error</em>, como por ejemplo:</p><div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;code&#34;</span> <span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
  <span class="nt">&#34;message&#34;</span> <span class="p">:</span> <span class="s2">&#34;Validation Failed&#34;</span><span class="p">,</span>
  <span class="nt">&#34;errors&#34;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;code&#34;</span> <span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
      <span class="nt">&#34;field&#34;</span> <span class="p">:</span> <span class="s2">&#34;first_name&#34;</span><span class="p">,</span>
      <span class="nt">&#34;message&#34;</span> <span class="p">:</span> <span class="s2">&#34;First name cannot have fancy characters&#34;</span>
    <span class="p">},</span>
    <span class="p">{</span>
       <span class="nt">&#34;code&#34;</span> <span class="p">:</span> <span class="mi">5622</span><span class="p">,</span>
       <span class="nt">&#34;field&#34;</span> <span class="p">:</span> <span class="s2">&#34;password&#34;</span><span class="p">,</span>
       <span class="nt">&#34;message&#34;</span> <span class="p">:</span> <span class="s2">&#34;Password cannot be blank&#34;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span></code></pre></div><h1 id="22-códigos-de-estado-http">22. Códigos de estado HTTP</h1><p>HTTP define un <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">set de significativos códigos de status</a> que pueden ser devueltos por la API. Éstos pueden ser nivelados para ayudar a los consumidores de la API dirigir sus respuestas apropiadamente. A continuación les dejo una lista de los que definitivamente deberías utilizar:</p><ul><li><em>200 OK -</em> Respuesta a un exitoso GET, PUT, PATCH o DELETE. Puede ser usado también para un POST que no resulta en una creación.</li><li><em>201 Created</em> – [Creada] Respuesta a un POST que resulta en una creación. Debería ser combinado con un <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30">encabezado Location</a>, apuntando a la ubicación del nuevo recurso.</li><li><em>204 No Content</em> – [Sin Contenido] Respuesta a una petición exitosa que no devuelve un body (como una petición DELETE)</li><li><em>304 Not Modified</em> – [No Modificada] Usado cuando el cacheo de encabezados HTTP está activo</li><li><em>400 Bad Request</em> – [Petición Errónea] La petición está malformada, como por ejemplo, si el contenido no fue bien parseado.</li><li><em>401 Unauthorized</em> – [Desautorizada] Cuando los detalles de autenticación son inválidos o no son otorgados. También útil para disparar un popup de autorización si la API es usada desde un navegador.</li><li><em>403 Forbidden</em> – [Prohibida] Cuando la autenticación es exitosa pero el usuario no tiene permiso al recurso en cuestión.</li><li><em>404 Not Found</em> – [No encontrada] Cuando un recurso no existente es solicitado.</li><li><em>405 Method Not Allowed</em> – [Método no permitido] Cuando un método HTTP que está siendo pedido no está permitido para el usuario autenticado.</li><li><em>410 Gone</em> – [Retirado] Indica que el recurso en ese endpoint ya no está disponible. Útil como una respuesta en blanco para viejas versiones de la API</li><li><em>415 Unsupported Media Type</em> – [Tipo de contenido no soportado] Si el tipo de contenido que solicita la petición es incorrecto</li><li><em>422 Unprocessable Entity</em> – [Entidad improcesable] Utilizada para errores de validación</li><li><em>429 Too Many Requests</em> – [Demasiadas peticiones] Cuando una petición es rechazada debido a la tasa límite .</li></ul><h1 id="en-conclusión">En conclusión</h1><p>Una API es una interfaz de usuario para desarrolladores. Enfoca tu esfuerzo en asegurar que no sea sólo usable a nivel funcional sino también amigable.</p><h1 id="referencias">Referencias</h1><ul><li><em>Vinay Sahni</em> | <a href="http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api">Best Practices for Designing a Pragmatic RESTful API</a></li></ul><p></p><blockquote><strong>¿Has visto algún error?</strong>: Por favor, ayúdame a corregirlo <a href="/contacto/">contactando</a> conmigo o comentando abajo.</blockquote><p></p><section class="share"><section id="sharing"><h3>Compártelo</h3><a aria-label="En Twitter" href="https://twitter.com/intent/tweet?text=Buenas%20pr%c3%a1cticas%20para%20el%20Dise%c3%b1o%20de%20una%20API%20RESTful%20Pragm%c3%a1tica+https%3a%2f%2felbauldelprogramador.com%2fbuenas-practicas-para-el-diseno-de-una-api-restful-pragmatica%2f+V%c3%ada%20%40elbaulp" title="En Twitter"><svg class="icon icon-twitter"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-twitter"></use></svg> </a><a aria-label="En Facebook" href="https://www.facebook.com/dialog/feed?app_id=145634995501895&display=popup&caption=Buenas&#43;pr%C3%A1cticas&#43;para&#43;el&#43;Dise%C3%B1o&#43;de&#43;una&#43;API&#43;RESTful&#43;Pragm%C3%A1tica&amp;link=https%3A%2F%2Felbauldelprogramador.com%2Fbuenas-practicas-para-el-diseno-de-una-api-restful-pragmatica%2F" target="_blank" title="En Facebook"><svg class="icon icon-facebook"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-facebook"></use></svg> </a><a aria-label="En G&#43;" href="https://plus.google.com/share?url=https%3a%2f%2felbauldelprogramador.com%2fbuenas-practicas-para-el-diseno-de-una-api-restful-pragmatica%2f" title="En G&#43;"><svg class="icon icon-google-plus"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-google-plus"></use></svg></a></section><section><h3>Suscríbete</h3><a aria-label="Suscribir al boletín de noticias" href="http://eepurl.com/IZ5sX" title="Suscribir al boletín de noticias"><svg class="icon icon-mail"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-mail"></use></svg> </a><a aria-label="Suscribir al RSS" href="https://elbauldelprogramador.com/rssfeed" title="Suscribir al RSS"><svg class="icon icon-rss"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-rss"></use></svg> </a><a aria-label="Síguenos en Twitter" title="Síguenos en Twitter" href="http://twitter.com/elbaulp" target="_blank"><svg class="social icon-twitter"><use xlink:href="#icon-twitter"></use></svg></a><a aria-label="Síguenos en G&#43;" title="Síguenos en G&#43;" href="http://plus.google.com/+ElBaulDelProgramador" target="_blank"><svg class="social icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg></a><a aria-label="Síguenos en Telegram" href="https://telegram.me/elbaulp" target="_blank"><svg class="social icon-telegram"><use xlink:href="#icon-telegram"></use></svg></a></section></section><div class="tags"><strong>Categorías:</strong><div id="taxo"><a id="cats" href="https://elbauldelprogramador.com/categories/articulos">articulos</a></div><strong>Etiquetas:</strong><div id="taxo"><a id="tags" href="https://elbauldelprogramador.com/tags/api">API</a> <a id="tags" href="https://elbauldelprogramador.com/tags/api-restful">API restful</a></div></div><h1>Quizá también te interese leer...</h1><ul><li><a href="/como-configurar-entornos-de-desarrollo-para-aplicaciones-moviles-en-un-servidor-cloud/">Cómo configurar entornos de desarrollo para aplicaciones móviles en un servidor cloud</a></li></ul><div class="near-posts"><a id="link-next" href="https://elbauldelprogramador.com/buscar-archivos-con-locate-mediante-expresiones-regulares-complejas/" class="post-item">«« Buscar archivos con locate mediante expresiones regulares</a> <a id="link-prev" href="https://elbauldelprogramador.com/botbrewcompila-instala-y-ejecuta-aplicaciones-linux-en-android/" class="post-item">BotBrew basil, Compila, instala y ejecuta aplicaciones Linux en Android »»</a></div></article><section class="comments"><amp-iframe height="300" sandbox="allow-scripts allow-same-origin allow-modals allow-popups allow-forms" resizable frameborder="0" src="https://cdn.rawgit.com/elbaulp/algui91-hugo/c1c11891b012e22c2e6ea7c399d6b03f7cdda04e/static/disqus-amp.html?url=https%3a%2f%2felbauldelprogramador.com%2fbuenas-practicas-para-el-diseno-de-una-api-restful-pragmatica%2f&disqus_title=Buenas%20pr%c3%a1cticas%20para%20el%20Dise%c3%b1o%20de%20una%20API%20RESTful%20Pragm%c3%a1tica"><div overflow tabindex="0" role="button" aria-label="Read more">Read more!</div></amp-iframe></section></section><footer><p>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a></p><p>An adaptation for Hugo of Cards's <a href="http://willianjusten.com.br">Willian Justen</a> Theme for Jekyll</p></footer><script>function w3_open(){document.getElementById("mySidebar").style.display="block"}function w3_close(){document.getElementById("mySidebar").style.display="none"}</script></body></html>